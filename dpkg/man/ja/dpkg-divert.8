.\" original cvs revision: 1.4.2.1
.TH DPKG-DIVERT 8 "December 1999" "Debian Project" "dpkg utilities"
.SH 名前
dpkg-divert -- パッケージのファイルのオーバーライド
.SH 書式
.B dpkg-divert
[options] [--add]
.I <file>
.br
.B dpkg-divert
[options] --remove
.I <file>
.br
.B dpkg-divert
[options]
--list
.I <glob-pattern>
.br
.B dpkg-divert
[options] --truename
.I <file>
.br
.SH 説明
`diversions' というファイルにより、dpkg はファイルをインストールする時に
本来意図していた場所ではなく退避した(`diverted')場所にインストールする
ようになる。diversions は Debian パッケージスクリプトで衝突がおこりうる
ファイルを移動させるために使うことができる。システム管理者は
パッケージの設定ファイルや他のファイルを(`conffiles' としてマーク
されていなければ) dpkg が新しいバージョンのパッケージをインストールする
時にそれらのファイルを上書きしてしまわないようにするために diversion を
使うことができる。
.sp
.B dpkg-divert
は diversions のリストを設定、更新するためのユーティリティである。これは
3 つの基本モードの機能をもっている。diversion の追加、削除、リストである。
それぞれ --add、--remove、--list オプションで指定する。さらに
退避されたファイルの実際の名前を表示することもできる。以下にあげられている
他オプションも指定することができる。
.SH オプション
.TP
.I --admindir <directory>
dpkg データディレクトリを <directory> に設定する。(デフォルト: /var/lib/dpkg)
.TP
.I --divert <divert-to>
<divert-to> は他のパッケージで使われる名前である。
.TP
.I --help
バージョンと簡単な利用法を表示して正常終了する。
.TP
.I --local
全てのパッケージを退避する対象にする。
.TP
.I --package <package>
<package> は <file> が退避されることのないパッケージの名前である。
.TP
.I --quiet
静かなモード。つまり無駄な出力をしない。
.TP
.I --rename
実際にファイルを移動する(もしくは戻す)。dpkg-divert は移動先のファイルが
既に存在していると動作を中断する。
.TP
.I --test
テストモード。つまり実際にはなにも実行せず、なにをするかを表示するだけである。
.TP
.I --version
プログラム名とバージョンを表示して正常終了する。
.SH 注意
追加する時は、デフォルトは --local と --divert <original>.distrib である。
削除する問は、--package もしくは --local と --divert は指定されていれば
追加した時と一致していなければいけない。

dpkg-divert ではディレクトリは退避できない。

共有ライブラリを退避する場合、注意すべきである。ldconfig(8)は
ライブラリに埋め込まれている DT_SONAME フィールドに基づいて、
シンボリックリンクを作成する。ldconfig は退避させることができないため
である(dpkg だけができる)。もし退避したライブラリと退避していない
ライブラリが同じ SONAME であれば、最終的にシンボリックリンクは退避した
ライブラリを指す。
.SH ファイル
.TP
.I /var/lib/dpkg/diversions
システムの現在の退避リストを含むファイル。これは dpkg で使われる重要なファイル
`status' や `available' がある dpkg の管理ディレクトリにある。
.br
注意: dpkg-divert はこのファイルを更新する時に、古いバージョンを
"-old" という名前をつけたファイルにコピーしておく。
.SH 関連項目
.BR dpkg (8).
.sp
詳しい情報は Debian ポリシーマニュアルの Appendix G "Diversions -
overriding a package's version of a file" を参照のこと。
.SH 著者
Copyright (C) 1995 Ian Jackson.
.sp
This is free software; see the GNU General Public Licence
version 2 or later for copying conditions.  There is NO warranty.
.SH 翻訳者
鵜飼文敏 <ukai@debian.or.jp>
