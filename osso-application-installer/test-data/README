[ This is twiki markup, for easy pasting. ]

---+++ About the test repository

The test repository contains three distributions: =cert=, =old= and
=new=.  The =cert= distribution is intended to be configured as a
certified source.  The two distributions =old= and =new= contain
mostly the same packages, but =new= might contain newer versions of
some of the packages in =old=, for example.

When configured by installing =testrepo-conf-mmc= (see previous
section), the =cert= distribution is configured as 'certified' and
'essential'.  The =old= distribution is enabled and the =new= one is
disabled.  You can switch to =new= by disabling =old= and enabling
=new=, obviously.  You can have both =old= and =new= enabled at the
same time, but that is not a very useful thing to do.  Neither =old=
nor =new= are certified or essential.

The packages and the distributions they are in:

   * *certified 1* (cert)
     <p>
     The only package in the =cert= distribution.  Installing it
     should not show the disclaimer dialog.

   * *package-A 1* (old), *package-A 2* (new)
     <p>
     Standalone package that depends on nothing and conflicts with
     nothing.  You can use it to test basic installation, upgrading and
     uninstallation.
     <p>
     To test upgrading, first install version 1 from =old=, then switch
     to =new=.  Package-A version 2 should be listed in the "Check for
     updates" view.

   * *package-B 1* (old, new)
     <p>
     Conflicts with package-A 1 (but no other version of package-A).
     You can use it together with package-A to test the behavior when
     conflicts are present.  It must not be possible to install
     package-A version 1 and package B at the same time.  You can
     install package-A version 2 and package-B at the same time,
     however.

   * *package-C 1* (old, new)
     <p>
     Depends on package-B, any version.  You can use it to test
     dependencies between packages, and indirect conflicts.
     <p>
     When package-A version 1 and package-B are not installed,
     installing package-C should automatically install package-B as
     well.
     <p>
     When package-A version 1 is installed (and consequently, package-B
     is not installed), installing package-C should not be possible,
     listing package-A as the reason.
     <p>
     When uninstalling package-C, package-B should be automatically
     uninstalled as well, but only when package-B has been
     automatically installed in the first place.  When package-B has
     been installed explicitely (e.g. by selecting it from the list and
     clicking "Install"), it should not be automatically uninstalled
     when uninstalling package-C.

   * *borken 1* (old, new)
     <p>
     A broken packages whose maintainer scripts will always fail.

   * *package-1 0* (old, new)
     <p>
     A package with a real program in it.  Installing it will pop up
     the "Select Location Dialog" to let the user choose a location in
     the menu.

   * *package-2 0* (old, new)
     <p>
     A package with a real program in it and a checkrm script.  If you
     uninstall this package while the contained program is running,
     the uninstallation should be cancelled automatically.

   * *licensed 0* (old, new)
     <p>
     A package where the user needs to agree to a license before being
     allowed to use it.

   * *big 0* (old)
     <p>
     A package that contains one big, useless file.


---+++ Sample test cases

Here are some test cases you can do with the packages in the test
repository.

---++++ Install, then update, then uninstall

   * Configure the =old= distribution.
   * Make sure that package-A is not installed.
   * Install package-A version 1 (from the "Games" section).
   * Configure the =new= distribution.
   * Update package-A to version 2 (via "Check for updates").
   * Uninstall package-A (via "List installed applications").

---++++ Install dependencies

   * Configure the =old= distribution.
   * Make sure none of package-A, package-B, and package-C are
     installed.
   * Open Details dialog for package-C.
   * Note that the "Installing" tab lists both package-B and package-C 
     to be installed.
   * Install package-C
   * Note that package-B has been installed as well.

---++++ Detect and resolve direct conflict

   * Configure the =old= distribution.
   * Make sure that package-B is not installed and that package-A
     version 1 is installed.
   * Try to install package-B.
   * Note that the installation will fail and that package-A is listed
     as the reason for it.
   * Uninstall package-A.
   * Install package-B, which should now succeed.

---++++ Detect and resolve indirect conflict

   * Configure the =old= distribution.
   * Make sure that package-C and package-B are not installed and that
     package-A version 1 is installed.
   * Try to install package-C.
   * Note that the installation will fail and that package-A is listed
     as the reason for it.
   * Uninstall package-A.
   * Install package-C, which should now succeed and automatically
     install package-B as well.

---++++ Detect and resolve direct conflict by updating

   * Configure the =old= distribution.
   * Make sure that package-B is not installed and that package-A
     version 1 is installed.
   * Try to install package-B.
   * Note that the installation will fail and that package-A is listed
     as the reason for it.
   * Configure the =new= distribution.
   * Install package-B, which should now succeed and automatically
     update package-A to version 2.

---++++ Refusal to uninstall needed package

   * Configure the =old= distribution.
   * Make sure that package-B and package-C are installed.
   * Try to uninstall package-B.
   * Note that the uninstallation will fail and list package-C as the
     reason for it.

---++++ Install Nokia certfied software

   * Install certified.
   * Note that the installation succeeds and does not show the
     legal disclaimer dialog.

---++++ Refusal to edit/remove essential repositories

   * Open the Tools/Repositories dialog.
   * Select the =cert= distribution.
   * Click again.
   * Note that the repository can not be edited.
   * Click on Remove.
   * Note that the repository is not removed.

---++++ Installing a package with a menu entry

   * Install package-1.
   * A dialog should be shown that let's you select a menu location.
   * Select a location and verify that the program "TestAppOne" is
     shown in that location.

---++++ Removing a package while its application is running

   * Make sure that package-2 is installed.
   * Start "test-app-two" from the menu and leave it running while
     performing the following steps.
   * Uninstall package-2 using the Application installer.
   * Note that the operation fails with an appropriate error message.
   * Switch to "test-app-two" and close it.
   * Uninstall package-2 using the Application installer.
   * Note that it now works.

---++++ Installing/removing a big package

   * Install the "big" package.
   * Note that the download dialog shows something like 5 Megabytes to
     be downloaded and that the progressbar works correctly.

---++++ Install a package with a license agreement

   * Install the "licensed" package.
   * Note that a license agreement is shown during installation.
