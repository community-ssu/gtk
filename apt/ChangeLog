2006-11-29  Marius Vollmer  <marius.vollmer@nokia.com>

	* apt-pkg/contrib/mmap.cc (WriteString): Set iSize before checking
	if there is still room so that IsOverfull can detect the overflow.
	Also, check with the real length of the string when Len is -1.

2006-10-23  Marius Vollmer  <marius.vollmer@nokia.com>

	* apt-pkg/pkgcachegen.cc (MakeStatusCacheWithSize): Set Overfull
	output param in two more situations when we fail to create or fill
	the DynamicMMap. (N31929)

2006-09-07  Marius Vollmer  <marius.vollmer@nokia.com>

	* apt-pkg/contrib/mmap.h (DynamicMMap::IsOverfull): New.
	* apt-pkg/pkgcachegen.cc (MakeStatusCacheWithSize,
	pkgMakeStatusCache): Factored everything except getting the
	MapSize out of pkgMakeStatusCacheout into MakeStatusCacheWithSize.
	Try both Small-Cache-Limit and Cache-Limit in pkgMakeStatusCache
	before giving up. (N31929, N32959)

2006-08-25  Marius Vollmer  <marius.vollmer@nokia.com>

	* apt-pkg/deb/dpkgpm.cc (pkgDPkgPM::Go): Redone dpkg status
	parsing again so that error messages work.  Use strsep instead of
	TokSplitString, to avoid splitting on ':' in the trailing part.

2006-07-12  Marius Vollmer  <marius.vollmer@nokia.com>

	* apt-pkg/acquire-item.cc (pkgAcqMetaSig::pkgAcqMetaSig): Don't
	move old version into partial/, we need it as a backup in the case
	the acquiring fails.
	(pkgAcqMetaSig::Custom600Headers): Updated to find the old
	version.
	(pkgAcqMetaSig::Done): Make sure that the file is in partial/ and
	no longer in lists/.
	(pkgAcqMetaSig::Failed): Use the old, existing version for a
	transient acquire failure.
	(pkgAcqMetaIndex::Failed): Likewise, start the gpgv pass for a
	transient failure when we have an old version and a signature
	file.
