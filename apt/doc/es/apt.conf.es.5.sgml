<!-- -*- mode: sgml; mode: fold -*- -->
<!doctype refentry PUBLIC "-//OASIS//DTD DocBook V3.1//EN" [

<!ENTITY % aptent SYSTEM "apt.ent.es">
%aptent;

]>

<!--
(c) 2003 Software in the Public Interest
Esta traducción ha sido realizada por Carlos Mestre <faraox@gulic.org> y
Rubén Porras Campo <nahoo@inicia.es>.
Está basada en la página de manual original:
versión 1.6 del CVS de
/cvs/debian-doc/manpages/english/apt/apt.conf.5.sgml
-->

<refentry lang=es>
 &apt-docinfo;
 
 <refmeta>
   <refentrytitle>apt.conf</>
   <manvolnum>5</>
 </refmeta>
 
 <!-- Man page title -->
 <refnamediv>
    <refname>apt.conf</>
    <refpurpose>Archivo de configuración de APT</>
 </refnamediv>
 
 <RefSect1><Title>Descripción</>
   <para>
   <filename/apt.conf/ es el fichero principal de configuración del conjunto de
   herramientas APT, todas las herramientas hacen uso del fichero de
   configuración y un analizador común de sintaxis de la línea de órdenes
   para proporcionar un entorno uniforme. Cuando se inicia una utilidad APT,
   este leerá la configuración especificada en la variable de entorno
   <envar/APT_CONFIG/ (si existe), luego leerá los ficheos en
   <literal/Dir::Etc::Parts/, entonces leerá el fichero de configuración
   principal especificado por <literal/Dir::Etc::main/, finalmente aplicará
   las opciones de la línea de órdenes para reescribir la directrices de la
   configuración, posiblemente cargando incluso más ficheros de configuración.
   <para>
   El fichero de configuración está organizado en forma de árbol con las
   opciones organizadas en grupos funcionales. Las opciones especificadas son
   dadas con dobles dos puntos, por ejemplo <literal/APT::Get::Assume-Yes/ es
   un opción de la función GET del conjunto de herramientas APT.
   Las opciones no son heredadas de sus grupos padres.
   <para>
   Sintácticamente, el lenguaje de configuración es modelado como en utilidades
   ISC, como bind y dhcp. Las líneas que comienzan con <literal>//</literal> se
   tratan como comentarios (se ignoran). Cada línea es de la forma
   <literallayout>APT::Get::Assume-Yes "true";</literallayout> Los 
   espacios entre los dos puntos son obligatorios, y las comillas son
   opcionales. Un nuevo ámbito puede abrirse con llaves, por ejemplo:
<informalexample><programlisting>   
APT {
  Get {
    Assume-Yes "true";
    Fix-Broken "true";
  };
};
</programlisting></informalexample>
   con nuevas líneas en cada lugar para hacerlo más legible. Las listas pueden
   crearse abriendo un nuevo ámbito e incluyendo una única palabra acotada
   entre comillas seguido de un punto y coma. Pueden ser incluidas múltiples
   entradas, cada una separada por un punto y coma.
<informalexample><programlisting>   
DPkg::Pre-Install-Pkgs {"/usr/sbin/dpkg-preconfigure --apt";};
</programlisting></informalexample>
   <para>
   En general, el fichero de configuración de ejemplo
   <filename>&docdir;examples/apt.conf</> &configureindex; es una buena guía
   para entender su aspecto.
   <para>
   Se permiten dos valores especiales, <literal/#include/ y <literal/#clear/. 
   <literal/#include/ incluirá el fichero dado, a menos que el final del nombre
   del fichero acabe en una barra, entonces se incluye el directorio entero.
   <literal/#clear/ se usa para suprimir la lista de nombres.
   <para>
   Todas las utilidades APT permiten la opción -o como una directriz
   arbitraria de configuración que es especificada en la línea de órdenes. La
   sintaxis es un nombre de opción completo (<literal/APT::Get::Assume-Yes/
   por ejemplo) seguido por signos de igualdad y el nuevo valor de la
   opción. Las listas también pueden ser añadidas incluyendo :: al final del
   nombre de la lista.
   </RefSect1>

 <RefSect1><Title>El grupo APT</>
   <para>   
   Este grupo de opciones controlan la conducta general de APT así como el
   mantenimiento de las opciones para todas las utilidades.
   <VariableList>
     <VarListEntry><Term>Arquitectura</Term>
     <ListItem><Para>
     Arquitectura del sistema; ajusta la arquitectura a usar cuando se obtengan
     los ficheros y se analicen las listas de paquetes. El valor por defecto es
     la arquitectura para la que ha sido compilado apt.
     </VarListEntry>
     
     <VarListEntry><Term>Ignore-Hold</Term>
     <ListItem><Para>
     Ignorar paquetes retenidos: Esta opción global causa que el solucionador de
     problemas ignore paquetes retenidos cuando tome decisiones.
     </VarListEntry>

     <VarListEntry><Term>Clean-Installed</Term>
     <ListItem><Para>
     Activo por defecto. Cuando se activa la función de auto-limpieza, ésta
     eliminará cualquier paquete de la caché que ya no pueda descargarse. Si se
     desactiva, entonces los paquetes que están localmente instalados son
     excluidos de la limpieza - nótese que APT no provee ningún medio directo
     para reinstalarlos.
     </VarListEntry>

     <VarListEntry><Term>Immediate-Configure</Term>
     <ListItem><Para>
     Deshabilita la configuración inmediata: Esta peligrosa opción
     deshabilita algunas partes del código de ordenación de APT para inducir a éste
     a hacer pocas llamadas a dpkg. Hacer esto podría ser necesario en algún
     sistema de usuario extremadamente lento, pero sería muy peligroso y
     podría causar que los scripts de instalación del paquete fallaran o algo
     peor. Úselo a su cuenta y riesgo.
     </VarListEntry>

     <VarListEntry><Term>Force-LoopBreak</Term>
     <ListItem><Para>
     Nunca habilite esta opción a menos que usted -realmente- conozca lo que
     está haciendo. Esto permite a APT eliminar temporalmente un paquete
     esencial para romper conflictos o bucles conflictos/pre-dependencias
     entre dos paquetes esenciales. EL BUCLE NO DEBERÍA EXISTIR NUNCA COMO TAL
     Y ES UN ERROR GRAVE. Esta opción trabajará si el paquete esencial no es
     tar, gzip, libc, dpkg, bash o cualquier otro del que dependan estos
     paquetes.
     </VarListEntry>

     <VarListEntry><Term>Cache-Limit</Term>
     <ListItem><Para>
     APT usa un fichero de caché de memoria mapeada de tamaño fijo para
     almacenar la información disponible. Esto fija el tamaño de esa caché.
     </VarListEntry>

     <VarListEntry><Term>Build-Essential</Term>
     <ListItem><Para>
     Define que paquete(s) son considerados dependencias de construcción
     esenciales.
     </VarListEntry>

     <VarListEntry><Term>Get</Term>
     <ListItem><Para>
     La subsección Get controla la herramienta &apt-get;, por favor, mire su
     documentación para más información sobre esta opción.
     </VarListEntry>

     <VarListEntry><Term>Cache</Term>
     <ListItem><Para>
     La subsección Cache controla la herramienta &apt-cache;, por favor, mire
     su documentación para más información sobre esta opción.
     </VarListEntry>

     <VarListEntry><Term>CDROM</Term>
     <ListItem><Para>
     La subsección CDROM controla la herramienta &apt-cdrom;, por favor, mire
     la documentación para más información sobre esta opción.
     </VarListEntry>
   </VariableList>
 </RefSect1>

 <RefSect1><Title>El grupo Acquire</>
   <para>   
   El grupo de opciones <literal/Acquire/ controla la descarga de paquetes y los
   manejadores de URI.
   <VariableList>
     <VarListEntry><Term>Queue-Mode</Term>
     <ListItem><Para>
     Modo de cola; <literal/Queue-Mode/ puede ser <literal/host/ o
     <literal/access/ que determina como paralelizar las conexiones salientes
     de APT. <literal/host/ significa que se abrirá una conexión
     por puesto de destino, <literal/access/ significa que será abierta una
     conexión por cada tipo de URI.
     </VarListEntry>

     <VarListEntry><Term>Retries</Term>
     <ListItem><Para>
     Número de reintentos. Si es distinto de cero APT volverá a intentar obtener
     los ficheros fallidos el número de veces dado.
     </VarListEntry>

     <VarListEntry><Term>Source-Symlinks</Term>
     <ListItem><Para>
     Usar enlaces simbólicos para los archivos fuente. Si es true los archivos
     fuente se enlazarán a ser posible, en vez de copiarse. Por omisión es true.
     </VarListEntry>

     <VarListEntry><Term>http</Term>
     <ListItem><Para>
     HTTP URIs; http::Proxy es el proxy http predeterminado a usar. Usa el
     formato general <literal>http://[[usuario][:clave]@]puesto[:puerto]/</>.
     También se puede especificar un proxy por cada puesto usando la forma 
     <literal/http::Proxy::&lt;puesto&gt;/ con la palabra especial <literal/DIRECT/ 
     queriendo decir que no se use proxy. La variable de entorno
     <envar/http_proxy/ modifica todas las preferencias.
     <para>
     Para los proxies que cumplen con HTTP/1.1 se proporcionan tres opciones de
     configuración. <literal/No-Cache/ dice al proxy que no use su caché bajo
     ninguna circunstancia, <literal/Max-Age/ sólo se envía para los ficheros de
     índice y le pide a la caché que refresque su copia si es más antigua que
     un determinado número de segundos. Debian actualiza sus ficheros de índices
     diariamente, debido a esto el valor predeterminado es 1 día.
     <literal/No-Store/ especifica que la caché nunca deberá almacenar la
     petición, sólo está habilitada para los ficheros de archivo. Puede ser
     útil para prevenir que un proxy se contamine con ficheros .deb muy
     grandes. Nota: Squid 2.0.2 no soporta ninguna de estas opciones.
     <para>
     La opción <literal/timeout/ establece el tiempo máximo de espera del
     método, esto se aplica a todo, incluyendo el tiempo de espera para realizar
     la conexión y para recibir datos.
     <para>
     Se proporciona una opción para controlar la profundidad de la tubería en
     casos en que el servidor no cumpla con RFC o tenga fallos (como pasa con
     Squid 2.0.2).
     <literal/Acquire::http::Pipeline-Depth/ puede ser un valor entre 0 y 5 
     indicando cuantas peticiones sin resolver puede envíar APT. DEBE
     especificarse si el puesto remoto no demora apropiadamente las conexiones
     TCP - de otro modo los datos se corromperán. Los puesto que necesiten esto
     violan el RFC 2068.
     </VarListEntry>

     <VarListEntry><Term>ftp</Term>
     <ListItem><Para>
     FTP URIs; ftp::Proxy es el servidor proxy a usar de forma
     predeterminada. Se encuentra en el formato estándar
     <literal>ftp://[[usuario][:clave]@]puesto[:puerto]/</> y se modifica mediante
     la variable de entorno <envar/ftp_proxy/. Para usar un proxy ftp es
     necesario establecer el script <literal/ftp::ProxyLogin/ en el fichero de
     configuración. Esta entrada especifica órdenes que se mandan al servidor
     proxy para decirle a donde debe conectarse. Consulte &configureindex; para
     ver un ejemplo de como hacerlo. Las variables de substitución disponibles
     son <literal/$(PROXY_USER)/, <literal/$(PROXY_PASS)/,
     <literal/$(SITE_USER)/, <literal/$(SITE_PASS)/, <literal/$(SITE)/, y
     <literal/$(SITE_PORT)/. Cada una se toma del componete de la URI
     correspondiente. 
     <para>
     La opción <literal/timeout/ establece el tiempo máximo de espera del
     método, esto se aplica a todo, incluyendo el tiempo de espera para realizar
     la conexión y para recibir datos.
     <para>
     Se proporcionan varias opciones para controlar el modo pasivo. Generalmente
     es seguro dejar activado el modo pasivo, funciona en casi todos los
     entornos. Sin embargo algunas situaciones requieren desactivar el modo
     pasivo y usar el modo puerto e su lugar. Esto se puede hacer globalmente,
     para conexiones a través de proxy o para un puesto específico (Consulte el
     fichero de configuración de muestra para ver ejemplos).
     <para>
     Es posible usar proxy FTP a través de HTTP estableciendo la variable de
     entorno <envar/ftp_proxy/ a una dirección http - mire la discusión del
     método http de arriba para la sintaxis. No se puede habilitar en el fichero
     de configuración y no se recomienda su uso debido a su poca eficiencia.
     <para>
     La opción <literal/ForceExtended/ controla el uso de las órdenes de RFC2428 
     <literal/EPSV/ y <literal/EPRT/. Por omisión es false, que quiere decir que
     sólo se usan si el control de conexión es IPv6. Poniéndolo a true fuerza su
     uso incluso en conexiones IPv4. Dese cuenta que la mayoría de los
     servidores FTP no soportan RFC2428.
     </VarListEntry>

     <VarListEntry><Term>cdrom</Term>
     <ListItem><Para>
     CDROM URIs; la única opción de configuración para los CDROM es el punto de
     montaje, <literal/cdrom::Mount/ debe ser el punto de montaje de la unidad
     de CDROM tal y como se especifica en <filename>/etc/fstab</>. Es posible
     proporcionar órdenes mount y unmount alternativas si el punto de montaje no
     puede especificarse en fstab (como con SMB y versiones de mount
     antiguas). Respecto a la sintaxis se pone <literallayout>"/cdrom/"::Mount
     "tal";</literallayout> dentro del bloque cdrom. Es importante no tener una
     barra final. Las órdenes de unmount pueden especificarse usando UMount.
     </VarListEntry>
   </VariableList>
 </RefSect1>

 <RefSect1><Title>Directorios</>
   <para>   
   La sección <literal/Dir::State/ contiene directorios que pertenecen a
   información del estado local. <literal/lists/ es el directorio donde se
   almacenan las listas de paquetes descargados y <literal/status/ es el nombre
   del fichero de estado de dpkg.
   <literal/preferences/ es el nombre del fichero de preferencias de APT.
   <literal/Dir::State/ contiene el directorio que se usará como prefijo por
   omisión en todas las opciones restantes en caso de que no empiezen con
   <filename>/</> o <filename>./</>.
   <para>
   <literal/Dir::Cache/ contiene lugares pertenecientes a información de la
   caché local, como las dos cachés de paquetes <literal/srcpkgcache/ y 
   <literal/pkgcache/ o como el lugar donde se guardan los ficheros descargados, 
   <literal/Dir::Cache::archives/. La generación de cachés puede desactivarse
   dejando sus nombres en blanco. Ésto enlentecerá el arranque pero ahorrará
   espacio. Normalmente se prefiere deshabilitar pkgcache en vez de
   srcpkgcache. Al igual que con <literal/Dir::State/ el directorio
   predeterminado está en <literal/Dir::Cache/
   <para>
   <literal/Dir::Etc/ contiene el lugar de los ficheros de configuración, 
   <literal/sourcelist/ contiene el lugar de sourcelist y <literal/main/ es el
   fichero de configuración predeterminado (esta opción de configuración no
   tiene ningún efecto a menos que se realice desde el fichero de configuración
   especificado por <envar/APT_CONFIG/).
   <para>
   La opción <literal/Dir::Parts/ lee en todos los fragementos de configuración
   en orden léxico <!--¿Y esto qué es?--> desde el directorio
   especificado. Después de esto se carga el fichero principal de configuración.
   <para>
   <literal/Dir::Bin/ apunta a los programas
   binarios. <literal/Dir::Bin::Methods/ especifica la localización de los
   manejadores de los métodos y <literal/gzip/, <literal/dpkg/,
   <literal/apt-get/, <literal/dpkg-source/, <literal/dpkg-buildpackage/ y
   <literal/apt-cache/ especifican la localización de los respectivos programas.
 </RefSect1>
 
 <RefSect1><Title>APT con DSelect</>
   <para>   
   Cuando APT se usa como método de &dselect; varias directivas de configuración
   controlan el comportamiento predeterminado. Se encuentran en la sección
   <literal/DSelect/.
   
   <VariableList>
     <VarListEntry><Term>Clean</Term>
     <ListItem><Para>
     Modo de borrado de caché; este valor puede ser always, prompt, auto,
     pre-auto y never. always y prompt borrarán todos los paquetes de la caché
     después de actualizar, prompt (predeterminado) pregunta primero. 
     auto borra sólo aquellos paquetes que ya no se pueden descargar (han sido
     reemplazados por otra versión, por ejemplo). pre-auto realiza esta última
     acción antes de descargar los paquetes nuevos.
     </VarListEntry>

     <VarListEntry><Term>Options</Term>
     <ListItem><Para>
     El contenido de esta variable se pasa a &apt-get; como opciones de línea de
     ordenes cuando se ejecuta en la fase de instalación.
     </VarListEntry>

     <VarListEntry><Term>UpdateOptions</Term>
     <ListItem><Para>
     El contenido de esta variable se pasa a &apt-get; como opciones de línea de
     ordenes cuando se ejecuta en la fase de actualización.
     </VarListEntry>

     <VarListEntry><Term>PromptAfterUpdate</Term>
     <ListItem><Para>
     Si es true la operación de [U]pdate en &dselect; preguntará siempre antes
     de continuar. Por omisión sólo pregunta en caso de error.
     </VarListEntry>
   </VariableList>
 </RefSect1>
 
  <RefSect1><Title>Como APT llama a dpkg</>
   <para>   
   Varias directivas de configuración controlan como APT llama a &dpkg;. Se
   encuentran en la sección <literal/DPkg/.

   <VariableList>
     <VarListEntry><Term>Options</Term>
     <ListItem><Para>
     Lista de opciones que se pasan a dpkg. Las opciones deben especificarse
     usando la notación de lista y cada elemento de la lista se pasa a &dpkg;
     como un sólo argumento.
     </VarListEntry>
     
     <VarListEntry><Term>Pre-Invoke</Term><Term>Post-Invoke</Term>
     <ListItem><Para>
     Es una lista de órdenes de shell que se ejecutarán antes de llamar a
     &dpkg;. Como <literal/Options/, debe de especificarse con notación de
     lista. Las órdenes se ejecutan en orden usando <filename>/bin/sh</>, si
     alguna falla APT abortará.
     </VarListEntry>

     <VarListEntry><Term>Pre-Install-Pkgs</Term>
     <ListItem><Para>
     Lista de órdenes de shell que se ejecutarán antes de llamar a
     &dpkg;. Como <literal/Options/, debe de especificarse con notación de
     lista. Las órdenes se ejecutan en orden usando <filename>/bin/sh</>, si
     alguna falla APT abortará. APT pasará a los programas los nombres de
     fichero de todos los .deb que va ha instalar por la entrada estándar, uno
     por línea.
     <para>
     La versión 2 de este protocolo vuelca más información, incluyendo la
     versión del protocolo, el espacio de configuración de APT <!--Esto suena
     raro-->, los ficheros y versiones que cambian. La versión 2 se habilita
     estableciendo <literal/DPkg::Tools::Options::cmd::Version/ a
     2. <literal/cmd/ es una orden dada a <literal/Pre-Install-Pkgs/.
     </VarListEntry>

     <VarListEntry><Term>Run-Directory</Term>
     <ListItem><Para>
     APT hace que éste sea su directorio de trabajo antes de llamar a dpkg, por
     omisión es <filename>/</>.
     </VarListEntry>

     <VarListEntry><Term>Build-Options</Term>
     <ListItem><Para>
     Éstas opciones se pasan a &dpkg-buildpackage; cuando compila paquetes,
     por omisión se limita a deshabilitar el firmado de paquetes y producir
     todos los binarios.
     </VarListEntry>
   </VariableList>
 </RefSect1>

 <RefSect1><Title>Opciones de depuración</>
   <para>   
   La mayoría de las opciones de la sección <literal/debug/ no son interesantes
   para el usuario normal, sin embargo <literal/Debug::pkgProblemResolver/
   muestra una salida interesante acerca de las decisiones que realiza
   dist-upgrade. <literal/Debug::NoLocking/ deshabilita el bloqueo de fichero de
   forma que APT puede realizar algunas operaciones sin permisos de superusuario
   y <literal/Debug::pkgDPkgPM/ mostrará la línea de órdenes para cada llamada a
   dpkg. <literal/Debug::IdentCdrom/ deshabilitará la inclusión de datos de
   statfs <!--¿ésto es correcto-->en los ID's de los CDROM.
 </RefSect1>
 
 <RefSect1><Title>Ejemplos</>
   <para>
   &configureindex; contiene un fichero de configuración de ejemplo mostrando
   los valores predeterminados para todas las opciones posibles.
 </RefSect1>
 
 <RefSect1><Title>Ficheros</>
   <para>
   <filename>/etc/apt/apt.conf</>
 </RefSect1>
 
 <RefSect1><Title>Véase también</>
   <para>
   &apt-cache;, &apt-config;<!-- ? reading apt.conf -->, &apt-preferences;.
 </RefSect1>

 &manbugs;
 &manauthor;

  <refsect1>
    <title>TRADUCTOR</title>
    <para>
      Traducción de Rubén Porras Campo
      &lt;debian-l10n-spanish@lists.debian.org&gt;
    </para>
  </refsect1>
 
</refentry>
