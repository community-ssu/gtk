.\" This manpage has been automatically generated by docbook2man 
.\" from a DocBook document.  This tool can be found at:
.\" <http://shell.ipoline.com/~elmert/comp/docbook2X/> 
.\" Please send any bug reports, improvements, comments, patches, 
.\" etc. to Steve Cheng <steve@ggi-project.org>.
.TH "APT-CACHE" "8" "10 November 2005" "" ""

.SH NAME
apt-cache \- APT パッケージ操作ユーティリティ -- キャッシュ操作
.SH SYNOPSIS

\fBapt-cache\fR [ \fB-hvsn\fR ] [ \fB-o=\fIconfig string\fB\fR ] [ \fB-c=\fIfile\fB\fR ] { \fBadd  \fIfile\fB\fI ...\fB\fR | \fBgencaches\fR | \fBshowpkg  \fIpkg\fB\fI ...\fB\fR | \fBshowsrc  \fIpkg\fB\fI ...\fB\fR | \fBstats\fR | \fBdump\fR | \fBdumpavail\fR | \fBunmet\fR | \fBsearch  \fIregex\fB\fR | \fBshow  \fIpkg\fB\fI ...\fB\fR | \fBdepends  \fIpkg\fB\fI ...\fB\fR | \fBpkgnames  \fIprefix\fB\fR | \fBdotty  \fIpkg\fB\fI ...\fB\fR | \fBpolicy  \fIpkgs\fB\fI ...\fB\fR }

.SH "説明"
.PP
\fBapt-cache\fR は APT のパッケージキャッシュに対していろいろな操作を行います。
\fBapt-cache\fR は、システム状態の操作は行いませんが、
パッケージのメタデータより検索したり、興味深い出力を生成するといった操作を
提供します。
.PP
\fB-h\fR や \fB--help\fR を除き、以下に挙げるコマンドが必要です。
.TP
\fBadd\fR
add はパッケージキャッシュに、指定したパッケージインデックス
ファイルを追加します。デバッグ専用です。
.TP
\fBgencaches\fR
gencaches は \fBapt-get check\fR と同じ動作を提供します。
これは \fB\fIsources.list\fB\fR(5) 内の取得元と \fI/var/lib/dpkg/status\fR 
から、ソースとパッケージのキャッシュを構築します。
.TP
\fBshowpkg\fR
showpkg は、コマンドライン上に列挙したパッケージの情報を
表示します。残りの引数はパッケージ名です。
列挙したパッケージについて、各バージョンの依存関係を表示するように 、
有効なバージョンと被依存関係を列挙します。
(正)依存関係とは、対象のパッケージが依存しているパッケージをさします。
また、被依存関係とは、対象のパッケージに依存しているパッケージをさします。
従って、パッケージの依存関係は満たさなければなりませんが、
被依存関係はその必要はありません。
実例として、以下に \fBapt-cache showpkg libreadline2\fR の
出力を掲げます。
.PP

.nf
Package: libreadline2
Versions: 2.1-12(/var/state/apt/lists/foo_Packages),
Reverse Depends: 
  libreadlineg2,libreadline2
  libreadline2-altdev,libreadline2
Dependencies:
2.1-12 - libc5 (2 5.4.0-0) ncurses3.0 (0 (null))
Provides:
2.1-12 - 
Reverse Provides: 
.fi

つまり、libreadline2 の version 2.1-12 は libc5 と ncurses3.0 に依存して
いて、libreadline2 が動作するにはこれらをインストールする必要があると
いうことが判ります。
一方、libreadlineg2 と libreadline2-altdev は libreadline2 に依存しています。
libreadline2 をインストールするためには、libc5, ncurses3.0, ldso を
すべてインストールしなければなりませんが、libreadlineg2 と 
libreadline2-altdev はインストールする必要はありません。
出力の残りの部分の意味については、apt のソースコードを調べるのが最良でしょう。
.TP
\fBstats\fR
stats はキャッシュについての統計情報を表示します。
それ以上、引数は必要ありません。以下の統計情報を表示します。
.RS
.TP 0.2i
\(bu
Total package names (総パッケージ計) は、
キャッシュに存在するパッケージ数を表します。
.TP 0.2i
\(bu
Normal packages (通常パッケージ) は、
公式の普通のパッケージ数を表します。
これは、他のパッケージの依存関係で使用された名称で、それが一対一に対応
するパッケージです。
大多数のパッケージはこのカテゴリに入ります。
.TP 0.2i
\(bu
Pure virtual packages (純仮想パッケージ) は、
仮想パッケージ名としてのみ存在する
パッケージ (仮想パッケージ名のみを「提供」し、実際にはいかなる
パッケージもその名称を持たない) の数を表します。
例えば、Debian GNU/Linux システムでは "mail-transport-agent" は
純仮想パッケージです。"mail-transport-agent" を提供するパッケージは
いくつもありますが、"mail-transport-agent" という名称のパッケージは
ありません。
.TP 0.2i
\(bu
Single virtual packages (単仮想パッケージ) は、
特定の仮想パッケージ名を提供するパッケージが、
ただ一つの場合の数を表します。
例えば、Debian GNU/Linux システムでは、"X11-text-viewer" は
仮想パッケージですが、"X11-text-viewer" を提供するパッケージは、
xless パッケージのみということです。
.TP 0.2i
\(bu
Mixed virtual packages (複仮想パッケージ) は、
その仮想パッケージ名を提供するパッケージが複数あるか、
またパッケージ名と同じ仮想パッケージ名を持つパッケージ数を表します。
例えば、Debian GNU/Linux システムでは、debconf は実際のパッケージ名でも
ありますが、debconf-tiny によって提供もされています。
.TP 0.2i
\(bu
Missing (欠落) は、依存関係中には存在するのに、どのパッケージ
にも提供されていないパッケージ名の数を表します。
パッケージがあるということは、全ディストリビューションにアクセスで
きていないか、(実ないし仮想) パッケージがディストリビューションから
はずされてしまったかもしれないことを表します。
通常、これは構文が矛盾することで参照されます。
.TP 0.2i
\(bu
Total distinct versions (個別バージョン計) はキャッシュに
存在するパッケージのバージョンの数を表します。そのため、この値は
最小でも総パッケージ計と一致します。
たとえば 2 種類以上のディストリビューション
("stable" と "unstable"の両方など) を利用した場合、
この値はパッケージ計よりもかなり大きい数になります。
.TP 0.2i
\(bu
Total dependencies (総依存関係) はキャッシュ内のすべての
パッケージで要求された依存関係の数です。
.RE
.TP
\fBshowsrc\fR
showsrc は指定したパッケージ名と一致するソースパッケージを、
すべて表示します。指定したパッケージについて、バイナリになるときの名称を
宣言したレコード同様に、すべてのバージョンについて表示します。
.TP
\fBdump\fR
dump はキャッシュにあるパッケージ毎の、短い一覧を表示します。
主にデバッグ用です。
.TP
\fBdumpavail\fR
dumpavail は標準出力に、利用可能なものの一覧を出力します。
\fBdpkg\fR(8) と共に使用すると便利です。また \fBdselect\fR(8) でも使用されます。
.TP
\fBunmet\fR
unmet はパッケージキャッシュ内の、不適当な依存関係の概要を
表示します。
.TP
\fBshow\fR
show は \fBdpkg --print-avail\fR に似た機能を実行します。
指定したパッケージのパッケージレコードを表示します。
.TP
\fBsearch\fR
search は与えられた正規表現によって、すべての利用可能な
パッケージに対して全文検索を行います。パッケージ名と説明に対して検索を
行い、パッケージ名と短い説明文を表示します。
\fB--full\fR が与えられた場合、マッチしたパッケージに対し 
show と同じ情報を出力します。
\fB--names-only\fR が与えられた場合は、説明文に対して検索を行わず、
パッケージ名に対してのみ対象とします。

空白で区切った引数で複数の検索パターンの and をとることができます。
.TP
\fBdepends\fR
depends は、パッケージが持っている依存関係と、その依存関係を
満たす他のパッケージの一覧を表示します。
.TP
\fBpkgnames\fR
このコマンドは、システムでの各パッケージの名称を表示します。
オプションの引数により、取得する一覧より先頭一致で抽出することができます。
この出力はシェルのタブによる補完機能で使いやすく、また非常に速く生成されます。
このコマンドは \fB--generate\fR オプションと共に使用すると非常に
便利です。
.TP
\fBdotty\fR
dotty は、コマンドライン上のパッケージ名から、
GraphViz <URL:http://www.research.att.com/sw/tools/graphviz/> 
パッケージの dotty コマンドで利用するのに便利な出力を生成します。
結果はパッケージの関係を表わす、ノード・エッジのセットで表現されます。
デフォルトでは、すべての依存パッケージをトレースするので、非常に大きい
図が得られます。
これは、APT::Cache::GivenOnly オプションの設定で解除する
ことができます。

結果のノードは数種類の形状となります。
通常パッケージは四角、純仮想パッケージは三角、複仮想パッケージは菱形、
六角形は欠落パッケージをそれぞれ表します。
オレンジの四角は再起が終了した「リーフパッケージ」、青い線は pre-depends、
緑の線は競合を表します。

注意) dotty はパッケージのより大きなセットのグラフは描けません。     
.TP
\fBpolicy\fR
policy は設定ファイル関係の問題について、デバッグを支援します。
引数を指定しなかった場合、取得元ごとの優先順位を表示します。
一方、パッケージ名を指定した場合、優先順の詳細情報を表示します。
.SH "オプション"
.PP
この説明で示したオプションは、すべて設定ファイルを使用して設定できます。
設定ファイルに書いた真偽値をとるオプションは \fB-f-\fR,\fB--no-f\fR, 
\fB-f=no\fR などのようにして上書きすることができます。
.TP
\fB-p\fR
.TP
\fB--pkg-cache\fR
パッケージキャッシュを格納するファイルを選択します。
パッケージキャッシュは、すべての操作で使用される一次キャッシュです。
設定項目 - Dir::Cache::pkgcache
.TP
\fB-s\fR
.TP
\fB--src-cache\fR
ソースキャッシュを格納するファイルを選択します。
このソースキャッシュは gencaches でのみ使用され、
ここに解析された取得元のパッケージ情報が格納されています。
パッケージキャッシュを構築する際に、ソースキャッシュは、
全パッケージファイルを再解析を避ける上で便利です。
設定項目 - Dir::Cache::srcpkgcache
.TP
\fB-q\fR
.TP
\fB--quiet\fR
静穏 - 進捗表示を省略してログをとるのに便利な出力を行います。
最大 2 つまで q を重ねることでより静かにできます。
また、\fB-q=#\fR のように静穏レベルを指定して、設定ファイルを
上書きすることもできます。
設定項目 - quiet
.TP
\fB-i\fR
.TP
\fB--important\fR
「重要」のみ表示 - Dipends と Pre-Depends のみ表示するため、
unmet と共に使用します。
設定項目 - APT::Cache::Important
.TP
\fB-f\fR
.TP
\fB--full\fR
search 時に全パッケージレコードを表示します。
設定項目 - APT::Cache::ShowFull
.TP
\fB-a\fR
.TP
\fB--all-versions\fR
全利用可能バージョンの全レコードを表示します。
show コマンドでのみ適用できます。
設定項目 - APT::Cache::AllVersions
.TP
\fB-g\fR
.TP
\fB--generate\fR
そのままキャッシュを使用するのではなく、自動的にパッケージキャッシュを
再生成します。これはデフォルトの動作ですが、\fB--no-generate\fR を
使用すると無効にできます。
設定項目 - APT::Cache::Generate
.TP
\fB--names-only\fR
.TP
\fB-n\fR
説明文ではなく、パッケージ名からのみ検索します。
設定項目 - APT::Cache::NamesOnly
.TP
\fB--all-names\fR
pkgnames で、仮想パッケージや不明な依存関係を含めた全名称を
表示させます。
設定項目 - APT::Cache::AllNames
.TP
\fB--recurse\fR
depends で、指定した全パッケージを再帰的に一度に表示します。
設定項目 - APT::Cache::RecurseDepends
.TP
\fB-h\fR
.TP
\fB--help\fR
使い方の短い要約を表示します。
.TP
\fB-v\fR
.TP
\fB--version\fR
プログラムのバージョンを表示します。
.TP
\fB-c\fR
.TP
\fB--config-file\fR
設定ファイル。 使用する設定ファイルを指定します。
この設定ファイルが読めない場合はデフォルトの設定ファイルを読み込みます。
文法の情報は \fB\fIapt.conf\fB\fR(5) を参照してください。
.TP
\fB-o\fR
.TP
\fB--option\fR
設定オプションのセット -  任意の設定オプションをセットします。
文法は \fB-o Foo::Bar=bar\fR となります。
.SH "ファイル"
.TP
\fB\fI/etc/apt/sources.list\fB\fR
パッケージの取得元。
設定項目 - Dir::Etc::SourceList
.TP
\fB\fI/var/lib/apt/lists/\fB\fR
\fB\fIsources.list\fB\fR(5) に指定したパッケージリソースごとの状態情報格納エリア。
設定項目 - Dir::State::Lists
.TP
\fB\fI/var/lib/apt/lists/partial/\fB\fR
取得中状態情報格納エリア。
設定項目 - Dir::State::Lists (必然的に不完全です)
.SH "関連項目"
.PP
\fB\fIapt.conf\fB\fR(5), \fB\fIsources.list\fB\fR(5), \fBapt-get\fR(8)
.SH "診断メッセージ"
.PP
\fBapt-cache\fR は正常終了時に 0 を返します。
エラー時には十進の 100 を返します。
.SH "バグ"
.PP
APT バグページ <URL:http://bugs.debian.org/apt>を
参照してください。
APT のバグを報告する場合は、
\fI/usr/share/doc/debian/bug-reporting.txt\fR や 
\fBreportbug\fR(1) コマンドを参照してください。
.SH "著者"
.PP
APT は the APT team <apt@packages.debian.org> によって書かれました。
.SH "翻訳者"
.PP
倉澤 望 <nabetaro@mx1.avis.ne.jp> (2003-2004)
.PP
Debian JP Documentation ML <debian-doc@debian.or.jp>
