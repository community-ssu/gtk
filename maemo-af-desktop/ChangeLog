2006-04-13  Johan Bilien <johan.bilien@nokia.com>

	Applied fix to "Select applets -dialog height is too short in Home"
	(Closes N#25607)
	* hildon-home/home-select-applets-dialog.h:
	  - added new defines
	* hildon-home/home-select-applets-dialog.c
	  - added scrolled window size request handling
	  - also some very minor cleanup
	  - fixed the dialog read only .desktop files

2006-04-12  Johan Bilien <johan.bilien@nokia.com>

	* hildon-status-bar/hildon-status-bar-{item,main}.[ch]:
	  - hildon_status_bar_item_new() now takes both the name and the
	    path to a status bar plugin
	  - Removed all code to load custom applets inherited from IT-2005
	  - Parse .desktop files to load custom applets.
	  - Various cleanups

2006-04-12  Johan Bilien <johan.bilien@nokia.com>

	* maemo-af-desktop.sh: Fixed generation of the gtkrc file

2006-04-12  Johan Bilien <johan.bilien@nokia.com>

	Applied fix to "Context sensitive menus dont come up for applets displayed
	in home in both normal mode and layout mode." (Closes N#24424)
	* hildon-home/layout-manager.c:
	  - changed wrong menu logical_id for cancel
	  - added logical_id for tap'n'hold
	  - Cut&paste tap'n'hold defines from gtk/gtkwidget.c
	  - added global struct required fields for tap'n'hold handling
	  - added layout_node struct callback handler
	  - declarations for new functions
	  - layout_mode_begin(): added callback signal for launching tap'n'hold
	    menu to each applet. button release callback added. tap'n'hold
	    creation call.
	  - layout_mode_end(): added removing tap'n'hold handler and menu
	  - _tapnhold_menu_cb(): new function. callback function to launch
	    tap'n'hold menu
	  - _tapnhold_close_applet_cb(): new function. callback function to
	    remove current applet
	  - add_new_applets(): callback function connected to applet
	  - button_click_cb(): when candidate is found set tap'n'hold timeout
	  - button_release_cb(): new function. removes existing tap'n'hold
	    when released
	  - drag_begin(): when drag starts tap'n'hold menu is not to be shown
	  - create_tapnhold_menu(): new function. creates tap'n'hold menu common
	    for all applets. initiates animation
	  - create_tapnhold_remove_timer(): new function. Clears all timer
	    values for tap'n'hold menu
	  - layout_tapnhold_timeout(): new function. Handles tap'n'hold timeout
	    before showing menu
	  - layout_tapnhold_set_timeout(): new function. Sets timeout counting
	    for tap'n'hold menu
	  - layout_tapnhold_timeout_animation(): new function. creates cursor
	    animation

2006-04-11  Johan Bilien <johan.bilien@nokia.com>

	Applied fix to "Close Application Dialog MEM-DIA001 is lost"
	(Closes N#24388)
	* hildon-navigator/hn-wm.c:
	  - Remove attempt to reset the TN items (wasn't working, needs support
        from elswhere to be done)
	* hildon-navigator/close-application-dialog.c:
	  - Check for already listed pids, so no duplicates will be in the list

2006-04-11  Johan Bilien <johan.bilien@nokia.com>

	* hildon-home/hildon-home-main.c: Fixed another crash in disk full
	  situation

2006-04-11  Johan Bilien <johan.bilien@nokia.com>

	* hildon-home/applet-manager.c: Fixed a potential crash in low
	  disk space situation (Closes N#21571)

2006-04-10  Johan Bilien <johan.bilien@nokia.com>

	* hildon-navigator/hn-wm.c: Do not specify type='method' in a
	  dbus match rule, this is the default (Closes N#26063)

2006-04-10  Johan Bilien <johan.bilien@nokia.com>

	* configure.ac: 2.6.9

2006-04-10  Johan Bilien <johan.bilien@nokia.com>

	* maemo-af-desktop.[sh,defs], maemo-af-desktop-main.[ch]: Parse the
	  maemo-af-desktop-specific gtkrc from the application.

2006-04-10  Johan Bilien <johan.bilien@nokia.com>

	* hildon-home/layout-manager.c: Fixed the leak of a GdkGC (Closes N#26116)

2006-04-10  Johan Bilien <johan.bilien@nokia.com>

	* hildon-home/layout-manager.c: Replaced the "Opening layout mode"
	  confirmation not with an animation banner, as required by  UI
	  specifications.

2006-04-07  Johan Bilien <johan.bilien@nokia.com>
	
	* hildon-home/hildon-home-restore-background.sh: Use sh instead of bash,
	  which doesn't exist on the target (Closes N#23524)

2006-04-07  Johan Bilien <johan.bilien@nokia.com>

	* hildon-home/layout-manager.c: Reset the applet offset after the
	  layout was cancelled (Closes N#24741)

2006-04-07  Johan Bilien <johan.bilien@nokia.com>

	* libhildonmenu/libhildonmenu.c: Use the memory XML writer instead
	  of the disk one, then write everything at once. This should be
	  faster and hopefully solve the race condition between the TN applet
	  writing to the file while the TN starts reading it. (Closes N#25930)

2006-04-07  Johan Bilien <johan.bilien@nokia.com>

	* Makefile.am, debian/rules: Use maemo-launcher for maemo-af-desktop

2006-04-05  Johan Bilien <johan.bilien@nokia.com>

	* hildon-home/home-select-applets-dialog.c: Fixed the leak of a string
	* hildon-home/hildon-home-main.c: Fixed the leak of a g_list

2006-04-05  Johan Bilien <johan.bilien@nokia.com>

	* hildon-home/hildon-home-main.c: Populate the Applet Settings submenu
	  even when the menu is triggered from the hardware key

2006-04-05  Johan Bilien <johan.bilien@nokia.com>

	* hildon-navigator/hn-wm-watched-window.c:
	  - hn_wm_watched_window_get_active_view(): Return the first view of
	    an application if no one was set yet (Closes N#22987)
	  - Identation fixes

2006-04-04  Johan Bilien <johan.bilien@nokia.com>

	* configure.ac: 2.6.8

2006-04-04  Guillem Jover  <guillem.jover@nokia.com>

	* hildon-navigator/hn-wm.h (MAEMO_LAUNCHER_SIGNAL_IFACE)
	  (MAEMO_LAUNCHER_SIGNAL_PATH, APP_DIED_SIGNAL_NAME): New macros.
	* hildon-navigator/hn-wm.c (hn_wm_dbus_signal_handler): New function.
	  (hn_wm_init): Setup hn_wm_dbus_signal_handler as a match rule.
	* hildon-navigator/hn-wm-watchable-app.h
	  (hn_wm_watchable_app_died_dialog_show): New prototype.
	* hildon-navigator/hn-wm-watchable-app.c
	  (hn_wm_watchable_app_died_dialog_show): New function.

2006-04-04  Guillem Jover  <guillem.jover@nokia.com>

	* hildon-navigator/hn-wm.h (DESKTOP_BIN_FIELD): Rename to ...
	  (DESKTOP_EXEC_FIELD): ... this. Fix all users.
	  (hn_wm_lookup_watchable_app_via_exec): New function prototype.
	* hildon-navigator/hn-wm.c
	  (hn_wm_lookup_watchable_app_via_exec_find_func): New function.
	  (hn_wm_lookup_watchable_app_via_exec): Likewise.
	* hildon-navigator/hn-wm-watchable-app.h
	  (hn_wm_watchable_app_get_exec): New function prototype.
	* hildon-navigator/hn-wm-watchable-app.c (HNWMWatchableApp): Rename
	  bin_name to exec_name. Fix all users.
	  (hn_wm_watchable_app_new): Store exec_name in the app struct. Add
	  exec_name to the HN_DBG registering print call.
	  (hn_wm_watchable_app_get_exec): New function.

2006-04-04  Johan Bilien <johan.bilien@nokia.com>

	* configure.ac: 2.6.7

	Applied fix to Close Application Dialog MEM-DIA001 is lost.
	(Closes N#24388)
	* Use lowmem state when deciding if CAD will be shown, preserves old
	  method as it probably won't be triggered ever (but just in case the
	  configurability is still wanted, it should work ok)
	* Reorganize code to make the dialog call only from hn-wm.c
	  and others-menu.c (all roads lead to hn_wm_top_service)
	* Fixes for behaviour
	* hildon-navigator/Makefile.am
	  hildon-navigator/close-application-dialog.h
	  hildon-navigator/close-application-dialog.c:
	  - Close application dialog implementation
	* hildon-navigator/hn-wm-util.h
	  hildon-navigator/hn-wm-util.c:
	  - New function hn_wm_get_vmdata_for_pid():
	    Fetches VMData value for specified pid from /proc/$PID/status
	* hildon-navigator/application-switcher.c
	   - Add dialog call to item activation
	* hildon-navigator/hn-wm-memory.h
	  hildon-navigator/hn-wm-memory.c:
	  - Add convenience function to get lowmem state without using
	    global variables in other files

2006-04-04  Johan Bilien <johan.bilien@nokia.com>

	* hildon-home/hildon-home-main.c: Fixed possible leaks of
	  ugly global variable home_bg_image_uri

2006-04-03  Johan Bilien <johan.bilien@nokia.com>

	* hildon-navigator/hildon-navogator-main.c: 
	  (load_navigator_plugin_list) Fix the leak the library string

2006-04-03  Johan Bilien <johan.bilien@nokia.com>

	* libhildonmenu/libhildonmenu.h: localize the "Favourites" string
	  (Closes N#25393)
	* configure.ac: 2.6.6

2006-04-03  Johan Bilien <johan.bilien@nokia.com>

	* */*: Corrected some deprecated logical ids.
	* configure.ac: 2.6.5

2006-04-03  Johan Bilien <johan.bilien@nokia.com>

	* hildon-navigator/hn-wm-watchable-app.c: (Closes N#24483)
	  - Replaced gtk_infoprint with hildon_banne_
	  - Removed message stacking work around, which seems no longer necessary
	* hildon-status-bar/hildon-status-bar-main.c: Replaced gtk_infoprint
	  with hildon_banner_

2006-03-31  Johan Bilien <johan.bilien@nokia.com>

	* libhildonmenu/libhildonmenu.c: Fixed a potential crash
	  I just introduced

2006-03-31  Johan Bilien <johan.bilien@nokia.com>

	* libhildonmenu/libhildonmenu.c: load the folder icon only once
	  (Closes N#25288)

2006-03-31  Johan Bilien <johan.bilien@nokia.com>

	* Added hildon-home/hildon-home-restore-background.sh
	* hildon-home/hildon-home-restore-background.sh: Restores the
	  default background after a backup from older releases is
	  restored (Closes N#23524)

2006-03-30  Marius Vollmer  <marius.vollmer@nokia.com>

	* hildon-navigator/osso-manager.c (osso_manager_infoprint): Free
	  retval (Closes N#20883)

2006-03-30  Johan Bilien <johan.bilien@nokia.com>

	* hildon-home/home-select-applet-dialog.c: Localize the applet
	  name (Closes N#25271)

2006-03-30  Johan Bilien <johan.bilien@nokia.com>

	* libhildonmenu/libhildonmenu.c, hildon-navigator/others-menu.c:
	  fixed numerous (and big) memory leaks in menu generation.

2006-03-30  Johan Bilien <johan.bilien@nokia.com>

	* hildon-home/hildon-home-main.h: Fixed L10n of the
	  set background dialog title (id has changed in the UI spec).

2006-03-30  Johan Bilien <johan.bilien@nokia.com>

	* hildon-navigator/hildon-navigator-main.c: (Closes N#23928)
      - Add defines for watchfile name
      - (task_navigator_deinitialize): Remove watchfiles

2006-03-29  Johan Bilien <johan.bilien@nokia.com>

	* hildon-home/hildon-home-main.c: (Closes N#19498)
	  - Add a callback for hardware events
	  - when told to lower our activity, put the applets in background
	    mode

2006-03-29  Johan Bilien <johan.bilien@nokia.com>

	Applied fix to "Task Navigator and Status bar are accessible when Home
	is in Layout mode" (Closes N#23028)
	* hildon-home/layout-manager.c:
	  - Added dbus calls to statusbar and tasknav to dim/undim.
	* hildon-status-bar/hildon-status-bar-main.c :
	  - added to method rpc_cb the code to handle insensitivity dbus calls 
	  - added the methods that do the actual insensitivity
	* hildon-navigator/hildon-navigator-main.c:
	  - added functions to handle the sensitivity
	* hildon-navigator/hn-wm.c:
	  - modified listening functions to listen to new type of signals

2006-03-29  Guillem Jover  <guillem.jover@nokia.com>

	* hildon-navigator/application-switcher.c
	  (application_switcher_initialize_menu): Refactor toggle button signal
      connection into ...
	  (as_toggle_button_connect): ... here. New function.

2006-03-29  Johan Bilien <johan.bilien@nokia.com>

	* hildon-navigator/application-switcher.[ch]:
	  - Removed the blinking timeout as per new specifications
	  - Stop blinking when the screen is blanked

2006-03-29  Guillem Jover  <guillem.jover@nokia.com>

	* hildon-navigator/hildon-navigator-main.c (load_symbols): Make symbol
      a single pointer instead of an array of pointers. Change the if
      sentences to a switch block.

2006-03-29  Guillem Jover  <guillem.jover@nokia.com>

	* hildon-navigator/application-switcher.h
	  (BIG_BUTTON_HEIGHT): New macro.
	  (BUTTON_1_Y_POS, BUTTON_2_Y_POS, BUTTON_3_Y_POS, BUTTON_4_Y_POS):
	  Use macros instead of hardcoded values.

2006-03-28  Guillem Jover  <guillem.jover@nokia.com>

	* hildon-navigator/application-switcher.h
	(NAME_SMAL_MENU_BUTTON_ITEM): Renamed to ...
	(NAME_SMALL_MENU_BUTTON_ITEM): ... this. Fix all users.
	(SMAL_BUTTON_HEIGHT): Rename to ...
	(SMALL_BUTTON_HEIGHT): ... this. Fix all users.

2006-03-27  Guillem Jover  <guillem.jover@nokia.com>

	* hildon-navigator/application-switcher.c
	  (application_switcher_initialize_menu): Refactor signal addition to ...
	  (as_add_signal): ... here. New function.

2006-03-27  Johan Bilien <johan.bilien@nokia.com>

	* hildon-navigator/application-switcher.c: Factorized creation
	  of AS buttons (patch courtesy of Guillem Jover, Closes N#24957)

2006-03-27  Johan Bilien <johan.bilien@nokia.com>

	* hildon-home/layout-manager.c: Fixed launching of the help from the
	  menu (Closes N#24891)

2006-03-27  Johan Bilien <johan.bilien@nokia.com>

	* configure.ac: 2.6.4

2006-03-24  Johan Bilien <johan.bilien@nokia.com>

	* hildon-home/layout-manager.c: (Closes N#24617)
	  - layout_mode_begin(): switch layout and home menus while saving home
	    menu
	  - layout_mode_end(): switch layout and home menus

2006-03-24  Johan Bilien <johan.bilien@nokia.com>

	* hildon-home/hildon-home-main.[ch]: Fixed various logical ids in
	  the home background settings (Closes N#24837)

2006-03-24  Johan Bilien <johan.bilien@nokia.com>

	* hildon-navigator/hn-wm-memory.c: (Closes N#20305)
	  - hn_wm_memory_kill_all_watched_foreach_func: fixed a bug when accessing
	    the only_kill_able_to_hibernate argument (passed as reference,
	    accessed as value).

2006-03-24  Johan Bilien <johan.bilien@nokia.com>

	* hildon-home/layout-manager.c: If the applet EventBox has a child,
	  draw the red border on the child's window, or it will be
	  overwritten by the child's painting (Closes N#24722)

2006-03-24  Johan Bilien <johan.bilien@nokia.com>

	* hildon-home/hildon-home-image-loader.c: Removed an unnecessary
	  image copy. (Closes N#22549)

2006-03-23  Johan Bilien <johan.bilien@nokia.com>

	* hildon-home/layout-manager.c: (Closes N#24439 and N#24767)
	  - added field to layout mode internal struct to hold handler id
	  - layout_mode_end(): added disconnecting signal handler to catch ESC
	    hw key event to cancel
	  - gdkkeysyms include added for ESC hw key
	  - layout_mode_start(): added signal connect to key press listener
	  - layout_mode_end(): added check to catch ESC hw key event to cancel
	    dialog and NOT exiting from layout mode
	  - layout_mode_key_press_listener() new function to listen hw key
	    events. ESC hw key pressing launches layout mode ending with cancel
		confirmation
	  - layout_mode_end(): changed GTK_RESPONSE_REJECT to
	    GTK_RESPONSE_CANCEL to catch ESC hw key event

2006-03-23  Johan Bilien <johan.bilien@nokia.com>

	* hildon-home/layout-manager.c: Fixed the cancel layout button (Closes
	  N#24428)

2006-03-22  Johan Bilien <johan.bilien@nokia.com>

	* hildon-navigator/other-menu.c:
	  - Removed code that got duplicated in branch merges
	  - Added a dnotify callback on the .desktop directory,
	    to allow new applications to appear in the menu (Closes N#24511)

2006-03-20  Johan Bilien <johan.bilien@nokia.com>

	* configure.ac: 2.6.3

2006-03-20  Johan Bilien <johan.bilien@nokia.com>

	* hildon-navigator/application-switcher.c: Stop blinking the
	  arrow when a clicked (Closes N#23155)
	* hildon-navigator/hn-wm-watched-window.c,
	  hildon-navigator/hn-wm-watchable-app.c:
	  Bring focus to the last active window when multiple-windows app
	  are topped through dbus

2006-03-17  Johan Bilien <johan.bilien@nokia.com>

	* hildon-navigator/hildon-navigator-main.c:
   	  - Fixed several leaks when a plugin cannot be loaded.
	  - Fixed leak of a string in create_new_plugin()
	* libhildonmenu/libhildonmenu.c: Free the document handle
	  when not used anymore (Closes N#23989)

2006-03-17  Johan Bilien <johan.bilien@nokia.com>

	* libhildonmenu/libhildonmenu.c: Initialize a TreeStore iterator
	  before accessing it. (Closes N#24341)

2006-03-16  Johan Bilien <johan.bilien@nokia.com>

	* hildon-navigator/hn-wm.c: Applied fix to "The Address book doesnot
	  appear to foreground when other applications open." - use
	  MB to top windows when they have no views and are topped
	  from Others-Menu
	  (Closes N#23973)

2006-03-15  Johan Bilien <johan.bilien@nokia.com>

	* hildon-navigator/application-switcher.c: Reverted to use 
	  GTK_WINDOW_TOPLEVEL for the tooltip, and set accept focus to FALSE
	  instead

2006-03-15  Johan Bilien <johan.bilien@nokia.com>

	* hildon-home/*:
	  . Export the show_*_banner functions
	  . Report about flash full when write ops fail (Closes N#20324)

2006-03-13  Johan Bilien <johan.bilien@nokia.com>

	* hildon-navigator/application-switcher.c: Use GTK_WINDOW_POPUP
	  instead of GTK_WINDOW_TOPLEVEL for the tooltip (Closes N#19590)

2006-03-13  Johan Bilien <johan.bilien@nokia.com>

	* hildon-status-bar/hildon-status-bar-lib.[ch]: Applied
	  patch by Kimmo Hämälainen to specify the text and query the
	  response of system dialogs (Closes N#24060)
	* Applied fix to "No information banner is shown when dimmed item is
	  tapped in Home" (Closes N#23033):
	  - hildon-home/hildon-home-main.h:
        . added new infobanner text logical id
	    . added new function declaration
	  - hildon-home/hildon-home-main.c:
	    . added header include for infoprint
	    . construct_titlebar_menu(): added callback for insensitive press of
	      settings menu item
	    . no_applets_settings_callback(): added new function showing infobanner 
	* hildon-home/hildon-home-main.h: Fixed a string logical id
	* configure.ac: 2.6.2

2006-03-10  Johan Bilien <johan.bilien@nokia.com>

	* hildon-navigator/application-switcher.c: arguments of store_item
	  differed in prototype and implementation. This resulted in it
	  being called with wrong order of arguments (Closes N#22987)

2006-03-10  Johan Bilien <johan.bilien@nokia.com>

	* hildon-home/layout-manager.c: (Close N#23344)
	  - layout_mode_begin(): after adding applets function call raise layout
	     mode eventbox to top
	  - _select_applets_cb(): after adding applets function call raise layout
	    mode eventbox to top
	  - _applet_expose_cb(): after adding applets function call raise layout
	     mode eventbox to top and cleaning extra else clause

2006-03-10  Johan Bilien <johan.bilien@nokia.com>
	* hildon-navigator/hn-wm-session.c: Fixed incorrect check
	  when saving state (Closes N#23930)

2006-03-10  Johan Bilien <johan.bilien@nokia.com>
	* hildon-navigator/hn-wm-watchable-app.c: use localized program name
	  in the starting info banner (Closes N#23428)
	* hildon-navigator/hn-*.c: Added Copyright and licensing notices

2006-03-08  Johan Bilien <johan.bilien@nokia.com>
	* Applied fix to N#23750:
	  - hildon_home_main(): removing old saving configure function call
	    causing reseting values
	  - hildon-home/home-applet-handler.c: libraryfile value fixed to correct

2006-03-08  Johan Bilien <johan.bilien@nokia.com>
	* hildon-home/hildon-home-main.[ch]:
      - global menu status flag added
	  - hildon_home_key_press_listener(): removed widget grabing add. Menu
	    closing added when open and menu key is pressed.
	  - hildon_home_key_release_listener(): removed widget grabing remove
      - Closes N#22637
	* configure.ac: Don't check for hildon-lgpl which is deprecated
	* hildon-navigator/hn-wm.c:
	  - hn_wm_compute_watched_window_hibernation_key(): Replaced
	    conditional gdk_error_trap_pop with unconditional one
	    (Closes N#23940)

2006-03-07  Johan Bilien <johan.bilien@nokia.com>
	* hildon-home/hildon-home-main.[ch]:
      - Moved static prototypes to the c file
	  - Added implementation of the help menu item
	  - Added help button to "Set background" and "Select image" dialogs
	  - Corrected a logical_id
	* hildon-home/home-select-applets-dialo.[ch]:
	  - Added help button to "Select applet" dialog
	* libhildonmenu/libhildonmenu.pc.in: added desktopentrydir variable

2006-03-07  Johan Bilien <johan.bilien@nokia.com>
	* hildon-home/hildon-home-main.c: Fixed a bug introduced when
	  applying home background refactoring patch. Closes N#23715
	* libhildonmenu/libhildonmenu.[ch]: Use Favourites name logical_id
	* configure.ac: 2.6.1

2006-03-06  Johan Bilien <johan.bilien@nokia.com>
	* hildon-home/hildon-home-main.h: Corrected an id which changed
	  in the UI specs
	* libhildonmenu/libhildonmenu.c: Use a different icon for the
	  "Favourites" folder

2006-03-06  Johan Bilien <johan.bilien@nokia.com>
	* hildon-navigator/hn-wm-memory.c: Fixed bogus debug statement
	  (Closes N#23595)
	* hildon-status-bar/hildon-status-bar-main.c: renamed presence_plugin
	  to presence
	* configure.ac: 2.6.0

2006-03-03  Johan Bilien <johan.bilien@nokia.com>
	* hildon-status-bar/{hildon-status-bar-{main,item}.c: Hardcode
	  loading of the presence status bar applet

2006-03-03  Johan Bilien <johan.bilien@nokia.com>
	* hildon-navigator/hn-wm-watchable-app.[ch]
	  hildon-navigator/hn-wm.c
	  hildon-navigator/hn-wm-watched-window.[ch]:
	  Imported unresponsive application killing confirmation note

2006-03-02  Johan Bilien <johan.bilien@nokia.com>,
	* hildon-navigator/hildon-navigator.[ch]: removed unused functions
	* hildon-navigator/application-switcher.c: Play sound on opening
	  and closing windows

2006-03-02  Johan Bilien <johan.bilien@nokia.com>,
	* Imported applet settings handling:

	hildon-home/applet-manager.h
	* applet_manager_get_settings_handler(): new function for retrieving
	  menu item for applet settings access
	* applet_manager_get_settings(): new function for retrieving menu item
	  for applet settings access
	* documentation update
	
	hildon-home/applet-manager.c
	* applet_manager_get_settings_handler(): new function implementation
	* applet_manager_get_settings(): new function implementation
	
	hildon-home/hildon-home-main.c
	* global changes
	
	* menu_popup_handler(): call submenu recreation function before user
	  is able to open submenu
	* construct_titlebar_menu(): submenu creation added
	* applets_settings_menu_fill(): fills submenu with available settings
	  menu items
	* applets_settings_menu_refill(): removes old settings items from
	  submenu and calls filling function
	* documentation update, debug only loggings removed

2006-03-01  Johan Bilien <johan.bilien@nokia.com>,
	* Imported latest changes in TN refactoring:

	* hildon-navigator/hn-wm-memory.c:
	  (hn_wm_memory_kill_all_watched_foreach_func),
	  (hn_wm_memory_kill_lru):
	* hildon-navigator/hn-wm-watched-window.c:
	  (hn_wm_watched_window_attempt_signal_kill):
	* hildon-navigator/hn-wm-watched-window.h:
	* hildon-navigator/hn-wm.c: (hn_wm_osso_kill_method):
	  rename hn_wm_watched_window_attempt_pid_kill and add new
	  arg for signal to be sent. ( Needed to kill hung apps )

2006-02-28  Johan Bilien <johan.bilien@nokia.com>,
	* Moved hildon-navogator/applications.menu to maemo-af-desktop-config

2006-02-27  Johan Bilien <johan.bilien@nokia.com>,
	* Imported home_background_refactoring branch (Closes N#23035)

2006-02-27  Johan Bilien <johan.bilien@nokia.com>,
	* Imported latest changes from the hoem refactoring (Closes N#23221):
	
	* hildon_home_event_filter(): added setting topmost flag when going
	  background
	* layout_mode_end(): changed applet deinitialize and destroy widget
	  call order
	* select_applets_selected():changed applet deinitialize and destroy
	  widget call order

2006-02-23  Johan Bilien <johan.bilien@nokia.com>,
	* Imported latest changes from the TN refactoring:
	  
	* configure.ac:
	* hildon-navigator/Makefile.am:
	* hildon-navigator/hn-hung-app-handler.c:
	Add new hung app handler binary to be called from MB.

	* hildon-navigator/hn-wm-types.h:
	* hildon-navigator/hn-wm.c: (hn_wm_atoms_init),
	(hn_wm_x_event_filter):
	Add initial support for handling _HILDON_FROZEN_APP X message.

	* hildon-navigator/hn-wm-types.h:
	* hildon-navigator/hn-wm-watched-window.c:
	(hn_wm_watched_window_process_wm_name):
	* hildon-navigator/hn-wm.c: (hn_wm_atoms_init),
	(hn_wm_x_event_filter):
	Track UTF8 window titles in preference to old ICCCM
	window naming. (Closes 23218)

	* hildon-navigator/application-switcher.c: (store_item),
	(app_switcher_make_item_text), (app_switcher_add_new_item),
	(app_switcher_item_icon_sync), (app_switcher_update_item):
	* hildon-navigator/hn-wm-watched-window.c:
	(hn_wm_watched_window_process_wm_name),
	(hn_wm_watched_window_get_name), (hn_wm_watched_window_destroy):
	* hildon-navigator/hn-wm-watched-window.h:
	* hildon-navigator/hn-wm.c: (hn_wm_x_event_filter):
	Re-add suport for subname property and update app switcher
	text naming accordingly.

2006-02-23  Johan Bilien <johan.bilien@nokia.com>,
	* hildon-status-bar/hildon-status-bar-main.[ch]: the gateway
	  plugin is gone (Closes N#23163)

2006-02-23  Johan Bilien <johan.bilien@nokia.com>,
	* hildon-status-bar/hildon-status-bar-main.c: a few cleanups in
	  the osso RPC callback.
	* libhildonmenu/libhildonmenu.c, hildon-navigator/others-menu.c:
	  fixed numerous memory leaks in the new OthersMenu handling.

2006-02-22  Johan Bilien <johan.bilien@nokia.com>,
	* hildon-navigator/applications.menu: Corrected .desktop name
	  for application installer, and de-dossfified (Closes N#23177)
	* Don't display Extras if empty
	* libhildonmenu/libhildonmenu.{c,h}: Imported latest versions
	* hildon-navigator/{others-menu.c,application-switcher.c,
	  hildon-navigator.h}: Use another menu style for menus generated by TN
	  (Closes N#23063)
	* Makefile.am, configure,ac, debian/control, hildon-home/Makefile.am:
	  Changes required for the new hildon-fm (Closes N#23168)
	* hildon-status-bar/hildon-status-bar-lib.c: Rewrite of the
	  system dialog handling by Kimmo Hamalainen (Closes N#23171)
	* hildon-home/hildon-home-main.c: Temporary workaround to
	  open the file dialog in Images. (Closes N#22926)
	* configure.ac: 2.5.1

2006-02-20  Johan Bilien <johan.bilien@nokia.com>,
	* hildon-navigator/applications.menu: Added default menu layout
	  (Closes N#22992)
	* configure.ac: 2.5.0

2006-02-17  Johan Bilien <johan.bilien@nokia.com>,
	* hildon-navigator/other-menu.{c,h}: Imported changes for
	  user-configurable menu.
	* hildon-home/applet-manager.c: Fixed a crash when 
	  save_state was called on applets.
	* hildon-navigator/application-switcher.c:
	  - recreate_tooltip_menuitem: Removed an invalid free. (Closes N#22957)
	* libhildonmenu/*: Imported libhildonmenu

	* Imported latest changes on TN refactoring:

	* hildon-navigator/application-switcher.c: (store_item),
	(app_switcher_make_item_text), (app_switcher_add_new_item),
	(app_switcher_item_icon_sync), (app_switcher_update_item):
	* hildon-navigator/hn-wm-watched-window.c:
	(hn_wm_watched_window_process_wm_name),
	(hn_wm_watched_window_get_name), (hn_wm_watched_window_destroy):
	* hildon-navigator/hn-wm-watched-window.h:
	* hildon-navigator/hn-wm.c: (hn_wm_x_event_filter):
	Re-add suport for subname property and update app switcher
	text naming accordingly.

	* hildon-navigator/hn-wm-memory.c:
	(hn_wm_memory_kill_all_watched_foreach_func):
	* hildon-navigator/hn-wm-types.h:
	* hildon-navigator/hn-wm-watchable-app.c:
	(hn_wm_watchable_app_launch_banner_timeout):
	* hildon-navigator/hn-wm-watchable-app.h:
	* hildon-navigator/hn-wm-watched-window.c:
	(hn_wm_watched_window_process_hibernation_prop),
	(hn_wm_watched_window_new),
	(hn_wm_watched_window_attempt_pid_kill),
	(hn_wm_watched_window_is_hibernating):
	* hildon-navigator/hn-wm-watched-window.h:
	* hildon-navigator/hn-wm.c: (hn_wm_atoms_init),
	(hn_wm_x_event_filter):
	* hildon-navigator/hn-wm.h:
	Improved support for hibernation of grouped windows.

2006-02-15  Johan Bilien <johan.bilien@nokia.com>,
	* Imported latest changes from home refactoring.
	  - Reverted to announced AP
	  - Fixed a crash in applets loading error
	  - Closes N#22691, N#22636
	* Added default TN configuration file
	* Added .desktop path variable to pkg-config for home
	* configure.ac: 2.4.5

2006-02-09  Johan Bilien <johan.bilien@nokia.com>,
	* Applied fix to N#20498:
	* hildon-home/hildon-home-main.c
	  - set_background_select_file_dialog(): In case of sketch mime type,
	    extra extension is removed for having displaying the extensions
	    consistent.
	* maemo-af-desktop-main.c:
	  - on SIGINT: try to exit properly
	  - on SIGTERM: send SIGTERM to all the watched applications (to get
	    rid of the EXIT DBus signal from application killer)
	* hildon-navigator/hn-wm.{c,h}: Removed handling of EXIT DBus signal,
	  which is not sent anymore by application killer.
	* removed legacy hildon-navigator/windowmanager.{c,h}

	* Imported latest changes from task navigator refactoring:
	* hildon-navigator/hn-wm-watched-window.c:
	 (hn_wm_watched_window_process_wm_state):
	 Fix minimise stacking order, see bug #22596
	 * hildon-navigator/application-switcher.c:
	 (app_switcher_update_item):
	 Fix out of bounds array access ( Tomas )
	 * hildon-navigator/hn-wm-watchable-app.c:
	 (banner_msg_stack_remove),
	 (hn_wm_watchable_app_launch_banner_close):
	 Fix a couple of snafu's in previous commit.
	 * hildon-navigator/hn-wm-watchable-app.c:
	 * hildon-navigator/hn-wm-watchable-app.h:
	 * hildon-navigator/hn-wm.h:
	 Hopeful fix to multiple displayed gtk_banner issues.
	 See bug #22614.
	 * hildon-navigator/hn-wm-memory.c:
	 * hildon-navigator/hn-wm-types.h:
	 * hildon-navigator/hn-wm-watched-window.c:
	 * hildon-navigator/hn-wm-watched-window.h:
	 * hildon-navigator/hn-wm.c:
	 (hn_wm_compute_watched_window_hibernation_key),
	 * hildon-navigator/hn-wm.h:
	Add support for tracking WM_WINDOW_ROLE and handling
	grouped HildonProgram windows awakening from hibernation.
	Some formatting cleanups.

	* configure.ac: 2.4.4

2006-02-09  Johan Bilien <johan.bilien@nokia.com>
	* Import from hildon-refactoring branch (matches r12951)
	* configure.ac: 2.4.3

2006-02-06  Johan Bilien <johan.bilien@nokia.com>
	* Imported changes by Matthew Allum:	
	* hildon-navigator/hn-wm-watched-window.h:
	Add missing HN_WM_SYNC_USER_TIME def.
	* hildon-navigator/application-switcher.c:
	(application_switcher_init),
	(app_switcher_menu_button_anim_needed),
	(app_switcher_icon_anim_stop), (app_switcher_icon_anim_timeout),
	(app_switcher_icon_anim_timeout_destroy),
	(app_switcher_icon_anim_timeout_add),
	(app_switcher_get_pixbuf_icon_from_theme),
	(app_switcher_get_icon_from_window), (add_item_to_button),
	(update_menu_items), (store_item), (app_switcher_add_new_item),
	(app_switcher_remove_item), (app_switcher_item_icon_sync),
	(app_switcher_update_item):
	* hildon-navigator/application-switcher.h:
	Much improve icon animation/blinking to more closely
	match specs so far.

	* hildon-navigator/hildon-pixbuf-anim-blinker.c: (get_iter),
	(get_delay_time), (get_pixbuf), (on_currently_loading_frame),
	(hildon_pixbuf_anim_blinker_new):
	* hildon-navigator/hildon-pixbuf-anim-blinker.h:
	Improve to do faded blinking with alpha.  Unoptimised as yet.
	Needs testing on device for performance. (Chris )

	* hildon-navigator/hn-wm-types.h:
	* hildon-navigator/hn-wm-watched-window.c:
	(hn_wm_watched_window_process_wm_hints),
	(hn_wm_watched_window_new), (hn_wm_watched_window_get_app),
	(hn_wm_watched_window_get_x_win),
	(hn_wm_watched_window_props_sync):
	* hildon-navigator/hn-wm-watched-window.h:
	* hildon-navigator/hn-wm.c: (hn_wm_atoms_init),
	(hn_wm_lookup_watched_window_via_service_find_func),
	(hn_wm_lookup_watchable_app_via_service_find_func):
	Add support for tracking _NET_WM_USER_TIME set to 0 for
	new windows not mapping topped. ( Tomas )
	Fix a couple of potential crashers if service name is NULL. (Tomas)

	* configure.ac: 2.4.2

2006-02-02  Johan Bilien <johan.bilien@nokia.com>
	* hildon-home/hildon-home-main.c:
	  - get_sidebar_image_to_blend: Don't increment the style reference
	    counter if we don't actually keep a reference on the style.
	* Closes N#22605

2006-02-02  Johan Bilien <johan.bilien@nokia.com>
	* hildon-navigator/application-switcher.c:
	(application_switcher_init), (button_toggled),
	(app_switcher_icon_anim_timeout),
	(app_switcher_icon_anim_timeout_destroy),
	(app_switcher_icon_anim_timeout_add),
	(app_switcher_get_pixbuf_icon_from_theme),
	(app_switcher_get_icon_from_window), (get_item_from_glist),
	(add_item_to_button), (update_menu_items), (store_item),
	(app_switcher_add_new_item), (app_switcher_remove_item),
	(app_switcher_item_icon_sync):
	* hildon-navigator/application-switcher.h:
	* hildon-navigator/hildon-pixbuf-anim-blinker.c:
	(hildon_pixbuf_anim_blinker_finalize), (get_size), (get_iter),
	(hildon_pixbuf_anim_blinker_iter_init),
	(hildon_pixbuf_anim_blinker_iter_class_init),
	(hildon_pixbuf_anim_blinker_iter_finalize), (advance),
	(get_delay_time), (get_pixbuf), (on_currently_loading_frame),
	(hildon_pixbuf_anim_blinker_new):
	* hildon-navigator/hildon-pixbuf-anim-blinker.h:
	Make blinking icons blink in sync and timeout to static
	after 5000ms
	* configure.ac: 2.4.1

2006-02-01  Johan Bilien <johan.bilien@nokia.com>
	* hildon-navigator/*: Imported task navigator plugin framework
	* configure.ac: 2.4.0

2006-02-01  Johan Bilien <johan.bilien@nokia.com>
	* hildon-home/*: Imported hildon-home refactoring
	* configure.ac: 2.3.0

2006-02-01  Johan Bilien <johan.bilien@nokia.com>
	* hildon-home/hildon-home-image-loader.c: Don't copy GdkPixBuf
      when we can use the source directly.
	* Closes N#22549
	* configure.ac: 2.2.2

2006-01-27  Johan Bilien <johan.bilien@nokia.com>
	* hildon-home/hildon-home-main.c: don't try to close state file if it
	  could not be opened
	* Closes N#20138 

2006-01-24  Johan Bilien <johan.bilien@nokia.com>
	* configure.ac: 2.2.1

2006-01-23  Johan Bilien <johan.bilien@nokia.com>
	* hildon-navigator/others-menu.c:
	  - others_menu_activate_item(): reset the priority to default
	    processes spawned by the task navigator. Patch courtesy of
		Tomas Junnonen
	* Closes N#22407

2006-01-20  Johan Bilien <johan.bilien@nokia.com>
	* configure.ac: 2.2.0
	* hildon-home/hildon-home-main.{c,h}
	  - Reverted fix to N#21895 as it introduces N#22414
	* hildon-navigator/*: Imported recent changes by Matthew Allum:

	 * hildon-navigator/hn-wm-watched-window.c:
	 (hn_wm_watched_window_process_wm_hints):
	 Make sure urgency hint change gets applied to flash icon

	 * hildon-navigator/application-switcher.c: (store_item),
	 (app_switcher_remove_item), (app_switcher_item_icon_sync):
	 * hildon-navigator/hn-wm-watched-window.c:
	 (hn_wm_watched_window_process_net_wm_icon),
	 (hn_wm_watched_window_process_hildon_view_list),
	 (hn_wm_watched_window_get_menu), (hn_wm_watched_window_destroy):
	 * hildon-navigator/hn-wm.c: (hn_wm_process_x_client_list):
	 Fixes to icons changing on the fly.
	 Fix leak in handling view lists

	 * hildon-navigator/Makefile.am:
	 * hildon-navigator/hildon-pixbuf-anim-blinker.c:
	 * hildon-navigator/hildon-pixbuf-anim-blinker.h:


	 * hildon-navigator/application-switcher.c: (button_toggled),
	 (add_item_to_button), (update_menu_items), (store_item),
	 (app_switcher_add_new_item), (app_switcher_remove_item),
	 (app_switcher_update_item), (app_switcher_top_desktop_item):
	 * hildon-navigator/application-switcher.h:
	 * hildon-navigator/hn-wm-watched-window.c:
	 (hn_wm_watched_window_process_net_wm_icon),
	 (hn_wm_watched_window_process_wm_hints),
	 (hn_wm_watched_window_get_x_win):
	 * hildon-navigator/hn-wm-watched-window.h:
	 * hildon-navigator/hn-wm.c: (hn_wm_x_event_filter):

	 * hildon-navigator/hn-wm.c: (hn_wm_top_view):
	 Fix topping of regular non view windows

	 * hildon-navigator/Makefile.am:
	 Fix typo for make dist to work.
	 * hildon-navigator/hn-wm.c: (hn_wm_top_view),
	 Make viewless windows get topped ok.

2006-01-17  Johan Bilien <johan.bilien@nokia.com>
	* hildon-home/hildon-home-main.c: Backported fix to N#21895 from IT-2005
	* maemo-af-desktop-main.c: Backported fix to N#21976 from IT-2005

2006-01-13  Johan Bilien <johan.bilien@nokia.com>
	* hildon-home/hildon-home-main.c: Backported fix to N#21213 from IT-2005
	* Reverted fix to N#19977

2006-01-05  Johan Bilien <johan.bilien@nokia.com>
	* hildon-home/hildon-home-main.c: Backported fix to N#19977 from IT-2005

2006-01-04  Johan Bilien <johan.bilien@nokia.com>
	* hildon-navigator/*: Imported recent changes by Matthew Allum

	 * hildon-navigator/hn-wm-watchable-app.c:
	 (hn_wm_watchable_app_new):
	 Dont free the .desktop object here

	 * hildon-navigator/hn-wm.c: (hn_wm_process_x_client_list):
	 Plug a leak in not freeing up client list prop

	* hildon-navigator/hn-wm-types.h:
	 * hildon-navigator/hn-wm-watchable-app.c:
	 (hn_wm_watchable_app_new):
	 * hildon-navigator/hn-wm-watchable-app.h:
	 * hildon-navigator/hn-wm-watched-window.c:
	 (hn_wm_watched_window_process_wm_state),
	 (hn_wm_watched_window_process_hildon_view_list),
	 (hn_wm_watched_window_new), (hn_wm_watched_window_is_hibernating),
	 (hn_wm_watched_window_hibernate), (hn_wm_watched_window_awake),
	 (hn_wm_watched_window_destroy), (hn_wm_watched_window_props_sync):
	 * hildon-navigator/hn-wm-watched-window.h:
	 Rename *_exec() to *_service()
	 Remove uneeded class name tracking
	 Add initial support for tracking WM_HINTS

	 * hildon-navigator/Makefile.am:
	 * hildon-navigator/windowmanager.c:
	 * hildon-navigator/hn-wm.c: (hn_wm_top_view), (hn_wm_atoms_init),
	 (hn_wm_lookup_watched_window_via_service_find_func),
	 (hn_wm_lookup_watched_window_via_service),
	 (hn_wm_lookup_watchable_app_via_service_find_func),
	 (hn_wm_process_x_client_list), (hn_wm_x_event_filter),
	 (hn_wm_watchable_apps_init):
	 Rename to hn-wm.c
	 Rename *_exec() to *_service()


2006-01-02  Johan Bilien <johan.bilien@nokia.com>
	* Imported Matthew Allum's cleanups and refactoring.
	
	 * hildon-navigator/hn-wm-watched-window.c:
	 (hn_wm_watched_window_props_sync):
	 * hildon-navigator/windowmanager.c: (hn_wm_x_window_is_watchable):
	 Fix XGetClassHint leakage.
	 * hildon-navigator/application-switcher.c: (update_menu_items):
	 * hildon-navigator/hn-wm-memory.c: (hn_wm_memory_kill_lru):
	 * hildon-navigator/hn-wm-session.c: (hn_wm_session_restore):
	 * hildon-navigator/hn-wm-watchable-app.c:
	 (hn_wm_watchable_app_new):
	 * hildon-navigator/hn-wm-watched-window-view.c:
	 (hn_wm_watched_window_view_new):
	 * hildon-navigator/hn-wm-watched-window-view.h:
	 * hildon-navigator/hn-wm-watched-window.c:
	 (hn_wm_watched_window_process_hildon_view_active),
	 (hn_wm_watched_window_process_wm_name),
	 (hn_wm_watched_window_process_hibernation_prop),
	 (hn_wm_watched_window_process_wm_state),
	 (hn_wm_watched_window_process_hildon_view_list),
	 (hn_wm_watched_window_new):
	 * hildon-navigator/hn-wm-watched-window.h:
	 * hildon-navigator/hn-wm.h:
	 * hildon-navigator/osso-manager.c: (add_method_cb):
	 * hildon-navigator/windowmanager.c: (hn_wm_top_view),
	 (hn_wm_top_service), (hn_wm_x_window_is_watchable),
	 (hn_wm_process_mb_current_app_window),
	 (client_list_remove_foreach_func), (hn_wm_process_x_client_list),
	 (hn_wm_add_watched_window), (hn_wm_x_event_filter),
	 (hn_wm_dbus_method_call_handler), (hn_wm_dbus_exit_handler),
	 (hn_wm_dnotify_func), (hn_wm_osso_kill_method),
	 (hn_wm_relaunch_timeout), (hn_wm_watchable_apps_init),
	 (hn_wm_init):
	 More refactoring.
	 * hildon-navigator/hn-wm-watchable-app.h:
	 Add some initial documentation
	 * hildon-navigator/application-switcher.c: (update_menu_items),
	 (app_switcher_add_new_item):
	 * hildon-navigator/hn-wm-memory.c: (hn_wm_memory_update_lowmem_ui):
	 * hildon-navigator/hn-wm-memory.h:
	 * hildon-navigator/hn-wm-session.c: (hn_wm_session_save),
	 (hn_wm_session_restore):
	 * hildon-navigator/hn-wm-session.h:
	 * hildon-navigator/hn-wm-watchable-app.c:
	 * hildon-navigator/hn-wm-watchable-app.h:
	 * hildon-navigator/osso-manager.c: (add_method_cb):
	 * hildon-navigator/windowmanager.c: (hn_wm_top_service),
	 (hn_wm_process_mb_current_app_window), (hn_wm_osso_kill_method):
	 Rename and rejig various osso/dbus/memory related calls

	 * hildon-navigator/Makefile.am:
	 * hildon-navigator/hn-wm-session.c:
	 * hildon-navigator/hn-wm-session.h:
	 * hildon-navigator/hn-wm.h:
	 Re-add session code.

	 * hildon-navigator/Makefile.in:
	 Remove this, shouldn't be in SVN

	 * hildon-navigator/hn-wm-memory.c: (hn_wm_memory_get_limits),
	 (hn_wm_memory_kill_all_watched_foreach_func):
	 * hildon-navigator/hn-wm-memory.h:
	 * hildon-navigator/hn-wm-watchable-app.c:
	 (hn_wm_watchable_app_has_windows_find_func),
	 (hn_wm_watchable_app_has_windows),
	 (hn_wm_watchable_app_is_hibernating),
	 (hn_wm_watchable_app_set_hibernate),
	 (hn_wm_watchable_app_is_able_to_hibernate):
	 * hildon-navigator/hn-wm-watchable-app.h:
	 * hildon-navigator/hn-wm-watched-window-view.c:
	 (hn_wm_watched_window_view_new),
	 (hn_wm_watched_window_view_set_name),
	 (hn_wm_watched_window_view_get_name),
	 (hn_wm_watched_window_view_lookup_find_func),
	 (hn_wm_watched_window_view_lookup),
	 (hn_wm_watched_window_view_destroy):
	 * hildon-navigator/hn-wm-watched-window-view.h:
	 * hildon-navigator/hn-wm-watched-window.c:
	 (hn_wm_watched_window_process_hildon_view_active),
	 (hn_wm_watched_window_process_wm_name),
	 (hn_wm_watched_window_process_hibernation_prop),
	 (hn_wm_watched_window_process_wm_state),
	 (hn_wm_watched_window_process_hildon_view_list),
	 (hn_wm_watched_window_new), (hn_wm_watched_window_get_app),
	 (hn_wm_watched_window_get_x_win), (hn_wm_watched_window_get_name),
	 (hn_wm_watched_window_set_name), (hn_wm_watched_window_get_menu),
	 (hn_wm_watched_window_set_menu), (hn_wm_watched_window_get_views),
	 (hn_wm_watched_window_add_view),
	 (hn_wm_watched_window_remove_view),
	 (hn_wm_watched_window_set_active_view),
	 (hn_wm_watched_window_get_active_view),
	 (hn_wm_watched_window_lookup_via_service_find_func),
	 (hn_wm_watched_window_lookup_via_service),
	 (hn_wm_watched_window_lookup_via_menu_widget_find_func),
	 (hn_wm_watched_window_lookup_via_menu_widget),
	 (hn_wm_watched_window_attempt_pid_kill),
	 (hn_wm_watched_window_is_hibernating),
	 (hn_wm_watched_window_hibernate), (hn_wm_watched_window_awake),
	 (hn_wm_watched_window_destroy):
	 * hildon-navigator/hn-wm.h:
	 * hildon-navigator/others-menu.c: (others_menu_activate_item):
	 * hildon-navigator/windowmanager.c: (hn_wm_top_view),
	 (hn_wm_top_service), (hn_wm_top_desktop), (hn_wm_atoms_init),
	 (hn_wm_x_window_is_watchable),
	 (hn_wm_process_mb_current_app_window), (hn_wm_x_event_filter):
	 Lots of refactoring. Still more to do.

	 * hildon-navigator/Makefile.am:
	 * hildon-navigator/hn-wm-types.h:
	 Add this header containing types

	 * hildon-navigator/application-switcher.c:
	 (application_switcher_initialize_menu),
	 (set_first_button_pressed_and_grab_tooltip), (activate_item),
	 (app_switcher_remove_item), (mce_handler):
	 * hildon-navigator/application-switcher.h:
	 Remove odd callbacks. Refactor that code a little

	* hildon-navigator/Makefile.am:
	 * hildon-navigator/Makefile.in:
	 * hildon-navigator/hn-wm-memory.c:
	 * hildon-navigator/hn-wm-memory.h:
	 * hildon-navigator/hn-wm-util.c:
	 * hildon-navigator/hn-wm-util.h:
	 * hildon-navigator/hn-wm-watchable-app.c:
	 * hildon-navigator/hn-wm-watchable-app.h:
	 * hildon-navigator/hn-wm-watched-window-view.c:
	 * hildon-navigator/hn-wm-watched-window-view.h:
	 * hildon-navigator/hn-wm-watched-window.c:
	 * hildon-navigator/hn-wm-watched-window.h:
	 * hildon-navigator/hn-wm.h:
	 * hildon-navigator/windowmanager.c:
	 Breakup existsing windowmanager.c into sub files

	 * hildon-navigator/windowmanager.c:
	 Import initial rewrite.

2005-12-21  Johan Bilien <johan.bilien@nokia.com>
	* configure.ac: 2.1.1

2005-12-20  Johan Bilien <johan.bilien@nokia.com>
	* hildon-navigator/windowmanager.c: Backported and ported to new dbus
	   fix to N#20921 from IT-2005

2005-12-19  Johan Bilien <johan.bilien@nokia.com>
	* hildon-navigator/application-switcher.c: Backported fixes to N#21089
	  from 2005
	* Reverted fix to N#21895 as it doesn't behave as expected

2005-12-19  Johan Bilien <johan.bilien@nokia.com>
	* hildon-home/hildon-home-image-loader.c: Backported fixes to N#21750
	  and N#21814 from 2005

2005-12-16  Johan Bilien <johan.bilien@nokia.com>
	* hildon-home/hildon-home-main.c:
	   . construct_user_applets(): Backported memory leak fixes from 2005
	   . Applied fix to N#21895:   'Apply' button is dimmed for the
	     currently selected (unloaded) image. Patch by Koivikko Jari.
	* hildon-status-bar/hildon-status-bar-main.c:
	   . add_user_items(): Backported memory leak fix from 2005

2005-12-15  Johan Bilien <johan.bilien@nokia.com>
	* Depend on dbus >= 0.50
	* backported a few changes from IT-2005
	* configure.ac: 2.1.0

2005-11-10  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	* Branched to IT-2005, trunk continues as IT-2006 branch *************************
	     * Patched PE bug N#18257 Task navigator: tooltip sometimes only one character wide
	* hildon-navigator/application-switcher.c
	* the label containing the tooltip is recreated each time it
  	is shown. This is a workaround on the sort-of-recursivity problem
  	on autotruncation. (Truncates previously truncated label again)
	* configure.ac: 2.0.0
	* 2.0.0 is the new baseline for IT-2006 development

2005-11-07  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	* Patched PE bug N#18881 Valgrind reported memory leaks with XProperty usage, Others menu and strdup
	* hildon-navigator/other_menu.c
	  - others_menu_deinit(): freeing menu
	  - others_menu_changed_cb(): freeing menu objects
	  - others_menu_get_items(): changed place to monitor directory changes, freeing objects
	  - others_menu_get_items(): changed menu item creation to be able free menu item data
	* hildon-navigator/windowmanager.c
	  - handle_active_window_prop(): XFreeing realwin_value and value structure members corrected
	* improved memory handling in functions:
	  - create_notify_handler()
	       - handle_active_window_prop()
	       - handle_killable_prop()
	       - get_subname()
	       - handle_autotopping()
	       - top_view()
	* configure.ac: 1.63.0

2005-11-01  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	* Reverted one incomplete bugfix	
	
2005-10-26  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	* Patched bug N#20384

2005-10-25  Karoliina Salminen  <karoliina.t.salminen@nokia.com>
	
	* Corrected copyright texts in Makefiles (e.g. Nokia -> Nokia Corporation)
	* Changed files: Makefile, Makefile.in, Makefile.am, hildon-home/Makefile.in, 
	  hildon-home/Makefile.am, hildon-navigator/Makefile.in, hildon-navigator/Makefile.am,
	  hildon-status-bar/Makefile.in, hildon-status-bar/Makefile.am
	* configure.ac: 1.61.0

2005-10-19  Luc Pionchon  <luc.pionchon@nokia.com>

	* configure.ac: 1.60.3

2005-10-19  Luc Pionchon  <luc.pionchon@nokia.com>

	     N#19187 Application icon is not visible in Tasknavigator although
	             application is running,
	
	* hildon-navigator/windowmanager.c
	(map_notify_handler): Add the mapped application window always to
	 the treemodel, if it is not yet there.
	
	(handle_subname_window_prop): If subname of the window changes and
	window is not yet in treemodel, add it here.

	(handle_active_window_prop): If window becomes active without
	being yet in treemodel, add it here. Ensure that the currently
	active view information is up to date.

2005-10-14  Karoliina Salminen  <karoliina.t.salminen@nokia.com>
	* Increased version number 1.60.1 for packaging
	* Applied 20250_postinstfix patch 
	* maemo-af-desktop/debian/maemo-af-desktop.postinst
  	- added parameter for image loader to notice instal time run
	* hildon-home/hildon-home-image-loader.c
	  - load_image_from_uri(): added postinstall parameter
	  - load_image_from_uri(): if postinstall, saw tool is disabled
	  - main(): check if there is extra parameter with correct value we
	    are in postinstall phase and set variable for load function call
	* Increased version number to 1.60.2
	* Applied Tomas Junnonen's <tomas.junnonen@nokia.com> patch for 
	N#19614: Memory leaks in Statusbar hildon_status_bar_item_new()

2005-10-13  Karoliina Salminen  <karoliina.t.salminen@nokia.com>
	* Increased version number to 1.60.0, preparing for next integration round
	* Patched bug N#20305: Desktop doesn't close applications on exit
	* hildon-navigator/windowmanager.c (kill_all): Allow also the
	     topmost application to be killed, when killable_only is set to
	     FALSE (indicates that Task Navigator and apps are about to
	     restart/shutdown anyway)

2005-10-13  Karoliina Salminen  <karoliina.t.salminen@nokia.com>
	* Increased version number to 1.59.2.
	* Reverted the previously mentioned ugly hack, now the configure points to libosso >= 0.9.18
	* Increased version number to 1.59.3
	* Updated libosso deps to 0.9.19+.

2005-10-13  Karoliina Salminen  <karoliina.t.salminen@nokia.com>
	* Fixed libosso version inconsistency problem with a workaround by reverting dependency to
	  libosso >= 0.9.10 from libosso >= 0.9.18 in configure.ac. Tested to compile ok with libosso 0.9.18-1.
	* debian/control still points to 0.9.18-1 in libosso-dev and it appears to not have any adverse effect on 
	  buildability.
	* Increased version number to 1.59.1.

2005-10-12  Karoliina Salminen  <karoliina.t.salminen@nokia.com>
	* Patched bug 20250:
	* hildon-home/hildon-home-image-loader.c
	  - Andrei Laperie's <andrei.laperie@nokia.com> patch to add SAW (allocation watchdog facilities)
	  - osso-mem.h include added
	  - load_image_oom_cb(): out-of-memory callback added
	  - load_image_from_uri(): oom control with
	* hildon-home/Makefile.am
	  - added osso libs to image loader LDADD list
	* configure.ac
	  - changed libosso version requirement
	* hildon-home/hildon-home-main.h
	  - nice value define for image loader process added
	* hildon-home/hildon-home-main.c
	  - system includes for process priority settings added
	  - construct_background_image():
	         after launching image loader process set it priority value.

2005-10-11  Karoliina Salminen  <karoliina.t.salminen@nokia.com>
	* Added Doxygen comments
	* Added doxyconf-file for generating Doxygen documentation by running doxygen doxyconf

2005-10-11  Karoliina Salminen  <karoliina.t.salminen@nokia.com>
	     * Patched bug N# 20284 Random ghost icon in Task Navigator:
	     * hildon-navigator/windowmanager.h: Removed killable member from
	     menuitem_comp_t, as windowmanager.c now uses a better method for
	     acquiring the information.
	     * hildon-navigator/windowmanager.c (handle_active_window_prop):
	     Application Switcher was occasionally updated incorrectly due to
	     use of hardcoded value instead of variable.
	     (menuitem_match_helper): menuitem_comp_t member killable removed.
	     (kill_all): Avoid attempting to kill applications that are not
	     killable/are already killed. Mark killed applications as not
	     killable, as otherwise we may attempt to kill applications that
	     are restaring after bgkill.
	* Submitted to integration as version 1.58.6

2005-10-11  Karoliina Salminen  <karoliina.t.salminen@nokia.com>
	* Patched bug 18522: Maemo desktop memory leaks detected on application switching
	* application-switcher.c: added free and unref statements to fix the leak.

2005-10-10  Karoliina Salminen  <karoliina.t.salminen@nokia.com>
	* Increased version number to 1.58.2
	* Commented out one unused function to prevent compilation warning

2005-10-07  Karoliina Salminen  <karoliina.t.salminen@nokia.com>
	* Raised version number to 1.58.0
	* Implemented the fix to bug N#20177 - Memory leak in Desktop destroy_notify_handler functionality:
	windowmanager.c::destroy_notify_handler g_free(wm_class); from inside if (killed == TRUE) to before it, so
	that the wm_class becomes freed every time. 
	* Implemented bug fix to bug N#20181 - Memory leak in Desktop map_notify_handler() function

2005-10-06  Karoliina Salminen  <karoliina.t.salminen@nokia.com>
	* Preparing for Thusday integration round. Raised version to 1.57.0.
	* Patched bug N#9843: After changing the language, the application hide from user
	* hildon-navigator/windowmanager.c (init_window_manager): Delayed
	     the invocation of state restoration in order to prevent problems
	     occuring with unified desktop.
	     (restore_delayer): A new function, simply starts the state
	     restoration after a delay.
	     (property_notify_handler): Do not autotop applications if desktop
	     is about to shutdown/restart.
	* Additional fix to X synchronization issue:
		windowmanager.c:
		XSync(NULL,FALSE); -> XSync(GDK_DISPLAY(),FALSE);

2005-10-05  Karoliina Salminen  <karoliina.t.salminen@nokia.com>
	* Version number -> 1.56.1
	* windowmanager.c:
	* Removed several XSync function calls from places that don't require synchronization
	* Now the XSync is called only after XSendMessage.

2005-10-04  Karoliina Salminen  <karoliina.t.salminen@nokia.com>
	* Raised version number to 1.56.0
	* Added XSync function calls to several places in windowmanager.c to fix
	the bug N#20187. There are several places in Desktop window manager which don't do 
	XSync after xtrap + XSendMessage

2005-10-03  Karoliina Salminen  <karoliina.t.salminen@nokia.com>
	* Applied the following patch from Guillem Jover <guillem.jover@nokia.com> :
	     * hildon-navigator/hildon-navigator-main.h:
	     (config_lowmem_notify): Split into ...
	     (config_lowmem_notify_enter): ... this and ...
	     (config_lowmem_notify_leave): ... this.
	     * hildon-navigator/hildon-navigator-main.c: Likewise.
	     * hildon-navigator/windowmanager.h (LAUNCH_FAILED_INSUF_RES): Remove
	     macro.
	     * hildon-navigator/windowmanager.c: Replace LAUNCH_FAILED_INSUF_RES
	     with "memr_ib_unable_to_switch_to_application".
	     (cannot_launch_dialog): Remove variable.
	     (top_service): Replace cannot_launch_dialog dialog with an infoprint.
	     (lowmem_handler): Make enter and leave notifications independently
	     selectable.

2005-10-03  Karoliina Salminen  <karoliina.t.salminen@nokia.com>
	* Increased version number to 1.55.0, for next integration round.
	* Patched bug N#19939: Application -loading info banners not disappearing after applications launched
	* hildon-navigator/windowmanager.c (handle_client_list_prop): When
	    	updating active view, update also application parent node.
	    	(launch_banner_timeout): Remove banner when application parent
	    	node has children in treemodel instead of checking for views in
	    	order to increase reliability.

2005-09-29  Karoliina Salminen  <karoliina.t.salminen@nokia.com>
	* Changed dimming feature to off
	* Changed files:
	* maemo-af-desktop.sh NAVIGATOR_LOWMEM_DIM=no
	* Upped version number to 1.54.4

2005-09-28  Karoliina Salminen  <karoliina.t.salminen@nokia.com>
	* Upped version to 1.54.0, will be the base for the next integration round
	* Applied patch for bug N#18524 - Race condition in personalisation dialog:
	* maemo-af-desktop/hildon-home/hildon-home-main.c: construct_background_image():
  	- added wait for killing old and obsolete image loader process
	* maemo-af-desktop/hildon-home/hildon-home-main.c: refresh_background_image():
  	- when user save directory has background image and loading pixbuf
	 	fails, no longer falling back to factory settings or
	 	default. Reason for failing is most probable low resource state
	 	when no loading succeeds. This would cause unwanted calls for
	 	image loader when chancing theme.
	* Increased version to 1.54.1: 
	* Applied patch for bug N#19662
	* Hand corrected Makefile.am and hildon-home/Makefile.am which parts did not apply from patch successfully
	* The patch introduced the following changes:
	* debian/control: Added dependencies for libosso-common-error.
	     * configure.ac: Added check for libosso-common-error pkgconfig
	     info
	     * Makefile.am: Added libosso-common-error library to list of
	     libraries to link to.
	     * hildon-home/Makefile.am: Added libosso-common-error libs and
	     cflags.
	     * hildon-home/hildon-home-main.h: Removed unnecessary defines.
	     * hildon-home/hildon-home-main.c: Added include for
	     libosso-common-error.
	     * Rely on default OK button logical ID for information notes
	     instead of note-specific ones that appear not to be
	     actually specified.
	     (show_system_resource_note): Use osso_commmon_error() to get the
	     required localised error message.
	     (show_file_corrupt_note): Use osso_common_error() to get the
	     required localised error message.
	* Increased to version number 1.54.3:
	* maemo-af-desktop.sh reduced the NAVIGATOR_LOWMEM_LAUNCH_BANNER_TIMEOUT from 200 to 20.
	- Fixes the reject reason for bug 19818
	- Fixed the reject reason for bug 19903
	- Fixes bug 19939 with a workaround (timeout is reasonable)

2005-09-27  Karoliina Salminen  <karoliina.t.salminen@nokia.com>
	* Upped to version 1.53.0, will be the base for the next integration round
	* Applied patch for task delayed info banner:
	  Added support for delayed infobanner showing to hildon-status-bar-main.c
	* Fixed bug 19593 (memory leak in statusbar/libosso) with a workaround 
	       (without the need of touch libosso at this time):
	  - in libosso callback strings created dynamically with str = g_strdup_printf("...")
	       are freed and reallocated in a shorter form as const with str = "Short error notice";

2005-09-27  Karoliina Salminen  <karoliina.t.salminen@nokia.com>
	* Changed low mem dimming in maemo-af-desktop.sh to yes as requested.

2005-09-27  Karoliina Salminen  <karoliina.t.salminen@nokia.com>
	* Applied lowmem infoprint patch from Guillem Jover:
	* When CONFIG_LOWMEM_DIM is TRUE, all buttons that can start new
	 	  applications are dimmed when we are in the 'lowmem' situation.
	* When CONFIG_LOWMEM_NOTIFY is TRUE, notify information to the user
	       upon entering and leaving the 'lowmem' situation.
	* When CONFIG_LOWMEM_PAVLOV_DIALOG is TRUE, display a dialog instead of
	an infoprint upon entering the 'lowmem' situation.
	* Upgraded package version to 1.52.0
	* Changed files:
		hildon-navigator-main.c		Added the getting of env variables
		hildon-navigator-main.h		Added externs for the globals that are used
						to contain the content of the env variables
		windowmanager.c			Added showing of lowmem notification dialog
		maemo-af-desktop.sh		Added the new env variables

2005-09-26  Karoliina Salminen  <karoliina.t.salminen@nokia.com>
	* Implemented variable launch banner timeout, which changes the
	launch banner timeout value according what is specified in environment variable 
	NAVIGATOR_LOWMEM_TIMEOUT_MULTIPLIER. The timeout is thus multiplied with the variable
	specified in the ENV variable.
	* Changed files:
		windowmanager.c		Added timeout multiplier handling
		windowmanager.h		Added new defines for the timeout multiplier
	
2005-09-22  Karoliina Salminen  <karoliina.t.salminen@nokia.com>
	* Applied memory management change patch.
	* Many things changed related to memory management:
	     * maemo-af-desktop is now configurable with its memory mgmt behaviour
	* Configuration parameters used after Mariuses patch:
		NAVIGATOR_DO_BGKILL=yes
		NAVIGATOR_LAUNCHBANNER_TIMEOUT=200
		NAVIGATOR_DIM_ON_LOWMEM=no
		NAVIGATOR_DIALOG_ON_LOWMEM=yes
		NAVIGATOR_LAUNCH_THRESHOLD_DISTANCE=2000
	* Changed files by Marius Vollmer's patch:
		maemo-af-desktop.sh
		hildon-navigator/application-switcher.h
		hildon-navigator/windowmanager.c
		hildon-navigator/windowmanager.h
		hildon-navigator/hildon-navigator-main.c
		hildon-navigator/application-switcher.c
		hildon-navigator/hildon-navigator-main.h
	* Changed files by Guillem Jover's patch:
		maemo-af-desktop.sh, the
		configuration parameters changed (and the parameter names changed):
		NAVIGATOR_LOWMEM_DIM=no
		NAVIGATOR_LOWMEM_DIALOG=no
		NAVIGATOR_LOWMEM_LAUNCH_BANNER_TIMEOUT=200
		NAVIGATOR_LOWMEM_LAUNCH_THRESHOLD_DISTANCE=2000
		hildon-navigator/application-switcher.h
		hildon-navigator/windowmanager.c
		Todo (to be cleaned up later):
		+/* FIXME: This is defined in maemo-af-desktop-main.c and we shouldn't
		+   be using it of course. Cleaning this up can be done when nothing
		+   else is left to clean up... */
		+extern Navigator tasknav;
		hildon-navigator/windowmanager.h
		hildon-navigator/hildon-navigator-main.c
		hildon-navigator/application-switcher.c

2005-09-20  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	* Raised version to 1.50.0. Preparing to week 38 release.
	* Patched 18881
	Changelog:
	* windowmanager.c
 	(property_notify_handler): moved freeing of vt.char_value out of if condition
 	(handle_active_window_prop): freed subname_str
 	(handle_minimization): freed app_name, view_name, icon_name
 	(menuitem_match_helper): freed wm_class, service
 	(top_view): freed exec
 	(top_service): duplicated string for relaunch_timeout
 	(launch_banner_timeout): removed unused variable app_name
 	(relaunch_timeout): freed service_name 

2005-09-13  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	* Preparing package for week 37 release, changed base version number

	* Patched bug N#15041:
	* maemo-af-desktop/hildon-home/hildon-home-main.h: 
  	- Removed as obsolete prototype of apply_background_response_handler
	* maemo-af-desktop/hildon-home/hildon-home-main.c:
	(apply_background_response_handler):
  	- Removed as obsolete 
	* maemo-af-desktop/hildon-home/hildon-home-main.c:
	(set_background_response_handler):
	- Dimming apply button every time its is selected
  	- After browse selected set sensitiveness of apply button
  	- removed obsolete signal_connect which was probable memory leak since it was
	created every time apply was selected

	* Patched bug N#18873:
	* hildon-home/hildon-home-main.c: Fixed memory leak

	* Patched bug N#18477:
	* hildon-navigator/osso-manager.h: Renamed the previously unused
	       string parameter for osso_manager_launch and took it in use.
	     * hildon-navigator/osso-manager.c: (osso_manager_launch): Took in use
	       the previously unused string parameter. Now it is passed with the
	       D-BUS message to the launched application, if it's present.
	     * hildon-navigator/windowmanager.c: (top_service): When launching
	       background killed applications, pass a specific string to the
	       osso_manager_launch().
	     * hildon-navigator/windowmanager.h: Added definition for the
	       restoration message data.

	* Patched N#19025:
	* hildon-home/hildon-home-main.h
  	- changed applet status default to 1 (visible)
	* hildon-home/hildon-home-main.c: (hildon_home_set_hardcode_values):
	- setting each applet status to default

	* Hand made changes by Karoliina Salminen (no patch): 
	Added one null checking to hildon-home/hildon-home-main.c:
	around fclose to avoid doing fclose to NULL ptr which would cause crash.

	* Patched bug N#19106
	* Patched maemo-af-desktop with an additional memory leak patch: Description:   	 
	- maemo-af-desktop/hildon-home/hildon-home-main.c:construct_background_image_with_uri()
	  leaks all strings copied in the argumen_list array.

	* Patched bug N#19108
	* Found leaked GnomeVFSURI when looking for another leak:
		hildon-home/hildon-home-main.c: home_bg_image_filename = gnome_vfs_uri_extract_short_name(gnome_vfs_uri_new(home_bg_image_uri));
	* The patch fixes the leak.

	* Patched bug N#19111
	hildon-home/hildon-home-main.c patched leaking GnomeVFSURI

	* Patched bug N#18019:
	* hildon-home/hildon-home-main.c: (set_background_dialog_selected):
  	- changed error log message to more descriptive
	* hildon-home/hildon-home-main.c: (hildon_home_get_factory_settings):
	  - changed error log message to more descriptive
	* hildon-home/hildon-home-main.c: (hildon_home_create_configure):
	  - changed error log message to more descriptive
	* hildon-home/hildon-home-main.c: (hildon_home_save_configure):
	  - changed error log message to more descriptive
	* hildon-home/hildon-home-main.c: (hildon_home_cp_read_desktop_entries):
	  - changed error log message to more descriptive

	* Tagged version 1.49.11 as ready for week 37 integration.

2005-09-09  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	* Fixed bug 19007: 
	     * hildon-home/hildon-home-main.c (hildon_home_main): Do not overwrite the existing event mask of the maemo-af-desktop for root window, 
	otherwise Task navigator 
	will break.
	* Hand fixed previous reverting patches that did not seem to work after all, lots of code
	  was reverted and I had to fix it by hand, correction patches failed to apply alltogether.
	* Fixed bug 18875

2005-09-09  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	     * Reverted version conflict which was caused by syncing CVS version and stage version.
	     * Patch edited & resolved by Karoliina Salminen & Tommi Komulainen

2005-09-09  Luc Pionchon  <luc.pionchon@nokia.com>

	* added dependency on hildon-base-lib0 (>= 0.9.3)

2005-09-08  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	* Patched bug N#18503
	* status-bar-item.c: line 280-284 null checking added.
	* Patched eaerlier Mathew's patch with a new patch.
	
2005-09-08  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	* Applied faster-atoms patch from Mathew Allum.
	* windowmanager.c modified to speed up the atom
	comparisons it does. rather than do hash lookups and then str
	comparisons it now just compares integer ATOM ID's. Im hoping its
	pretty safe to apply ( after testing your end ) and wont cause any
	regressions.
	* Changed version to 1.48.2. This can be now tested.

2005-09-08  Karoliina Salminen  <karoliina.t.salminen@nokia.com>
	
	* Tagged 1.48.1 for integration. Will be included to week 36, if Mathew's patches don't cause 
	additional problems.
	* Tested that the package can be built.

2005-09-07  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	* Increased version baseline to 1.48.0 due to bugfix camp.
	* First bugfix camp patch applied
  	* Applied improve-hildon-home-event-efficiency -patch from Mathew
	 	Allum.

2005-09-07  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	* Fixed bug N#18830
	* hildon-navigator/windowmanager.c: method_call_handler: removed one dbus_free (service_name); (the second last one) 
	* The bug was caused by loss of name of the service. 
	* Should work now, the line is now commented out.

2005-09-06  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	     * Additional patch applied for N#18522
	* Patch applied for bug N#14514:
	*  hildon-navigator/application-switcher.c:
	        (application_switcher_initialize_menu): The AS button icon is no
	        longer added to the container here.
	        (application_switcher_add_menubutton): Added function that allows the 
	        AS button icon to be packed from outside Application Switcher.
	      * hildon-navigator/application-switcher.h: Added function
	        application_switcher_add_menubutton definition
	      * hildon-navigator/hildon-navigator-main.c: Removed the 
	        navigator_gui_draw_cb callback function and references to it 
	        as obsolete.
	      * hildon-home/hildon-home-main.h: Removed function 
	        hildon_home_show_background_cb definition
	      * hildon-home/hildon-home-main.c: Removed function
	        hildon_home_show_background_cb and references to it as obsolete.
	* Patch applied for N#18300:
	* hildon-navigator/windowmanager.h: Added support for StartupNotify
		.desktop key.
 	* hildon-navigator/windowmanager.c (create_model): Added support
		for StartupNotify .desktop key.
		(method_call_handler): If StartupNotify is set to false, do not
	   display the startup banner for application.

2005-09-05  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	* Patches applied for bug N#18522
	     * Patch applied for bug N#17734

2005-09-01  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	* Fixed bug N#17425.
	* Updated hildon-navigator/windowmanager.h: #define LAUNCH_FAILED_INSUF_RES "cerm_can_not_open_insuf_res"
	       => #define LAUNCH_FAILED_INSUF_RES "ckct_ib_application_lowmem"

2005-09-01  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	     * Updated debian/control file to depend to hildon-base-lib 0.9.3
	     * Updated localization package dependencies to updated packages.

2005-08-30  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	* Added support for user plugins in the hildon-status-bar
	     * Added support for user plugins in the hildon-home
	     * Updated the following source files:
	        maemo-af-desktop/hildon-status-bar/hildon-status-bar-main.c
	        maemo-af-desktop/hildon-status-bar/hildon-status-bar-main.h
	        maemo-af-desktop/hildon-status-bar/hildon-status-bar-item.c
	        maemo-af-desktop/hildon-home/hildon-home-plugin-loader.c
	        maemo-af-desktop/hildon-home/hildon-home-main.c
	        maemo-af-desktop/hildon-home/hildon-home-main.h
	     * Raised version number
	     * Requires new version of the hildon-base-lib.

2005-08-30  Karoliina Salminen  <karoliina.t.salminen@nokia.com>
	     
	* hildon-navigator/others-menu.c (others_menu_changed_cb): Fix for bug
	17741, others-menu leaking file descriptors with each update of the menu
	     * This fix requires support from hildon-base-lib, otherwise it will not work.

2005-08-30  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	     * Patched bug # 9179
 	* hildon-home/hildon-home-main.c: Replaced keysnooper with key press/release
	event handlers for the main window. This fixes problems with menu key handling.

2005-08-30  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	     * Patched bug #17728 + corrected it by hand.
	* Extra libraries where added in linking time. Improved library options.
	* maemo-af-desktop/
		* configure.ac: 
  			- Added gnome-vfs and gdk and libs
		* hildon-home/Makefile.am 
  			- Updated library list for home image loader

2005-08-29  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	* Patched bug #16496.  
	* hildon-navigator/windowmanager.c (kill_all): Do not background
	kill applications that do not have X-Osso-Service defined, as we
	can't relaunch them.

2005-08-25  Karoliina Salminen  <karoliina.t.salminen@nokia.com>
	     
	     * Fixed byg #10558 - FR_CA Home memory card cover: no message when open
	* maemo-af-desktop/hildon-home/hildon-home-main.c:
	       (image_loader_callback):
	Changed exit status to refer higher byte since status goes there.
	* maemo-af-desktop/hildon-home/hildon-home-image-loader.h:
	Added missing slash to uri prefix

2005-08-24  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	     * Fixed bug #17249
	* po/en_GB.po: Added logical ID "cerm_can_not_open_insuf_res" for the log
	launch failures in low memory situations.
	* windowmanager.c (top_service): When attempting to top killed applications and
	memory is low, st up a timer to check the success of the launch.
	(launch_banner_timeout): If the application launch failed and memory is low,
	display an information note for the user. 
	(relaunch_timeout): A new function. Checks if application 
	relaunch for killed applications done during low memory situation failed and
	displays information note in those situations.
	* windowmanager.h: Added definitions for (re)launch timeout and the
	insufficient memory infobanner.

2005-08-12  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	* Removed earlier maemo-af-desktop/debian/maemo-af-desktop.postinst patch.
	     Applied new patch to maemo-af-desktop/debian/maemo-af-desktop.postinst file.
	* Correction to bug N#14536 "On setting background image, a note "Loading
	image" note does not display" 
	* maemo-af-desktop/debian/maemo-af-desktop.postinst: Removed harmful remove file
	* maemo-af-desktop/hildon-home/hildon-home-main.c: Global variable update
	* maemo-af-desktop/hildon-home/hildon-home-main.c: (load_original_bg_image_uri):
	Extra gnome-vfs function calls removed. Set-up in_use_uri.
	* maemo-af-desktop/hildon-home/hildon-home-main.c: (set_background_select_file_dialog):
	Global uri variable writing changed local. Uri is set only after
	operation is active. Return TRUE only when successfull.
	* maemo-af-desktop/hildon-home/hildon-home-main.c: (combobox_active_tracer): Uri handling, combobox and apply button rewrite.
	Prevent a crash by checking that we do not pass NULL pointers to g_str_equal()
	* maemo-af-desktop/hildon-home/hildon-home-main.c: (set_background_response_handler):
	Uri handling, combobox and apply button rewrite.
	Prevent a crash by checking that we do not pass NULL pointers to g_str_equal()
	* maemo-af-desktop/hildon-home/hildon-home-main.c: (apply_background_response_handler):
	Unnessesary check removed.
	* maemo-af-desktop/hildon-home/hildon-home-main.c: (set_background_dialog_selected):
	Prevent a crash by checking that we do not pass NULL pointers to g_str_equal()
	Uri handling, combobox and apply button rewrite.
	* maemo-af-desktop/hildon-home/hildon-home-main.c: (construct_background_image):
	Rename and rewrite of image loading process variables
	* maemo-af-desktop/hildon-home/hildon-home-main.c: (image_loader_callback):
	Rename and rewrite of image loading process variables. Uri
	handling, combobox and apply button rewrite.
	* maemo-af-desktop/hildon-home/hildon-home-main.c: (show_loading_cancel_note):
	Rename and rewrite of image loading process variables and function name. 
	Cancel note creation added
	* maemo-af-desktop/hildon-home/hildon-home-main.c: (loading_cancel_note_handler):
	Rename and rewrite of image loading process variables and function
	name. Cancel note funtionality and process handling update.
	* maemo-af-desktop/hildon-home/hildon-home-main.c: (get_sidebar_image_to_blend): char to gchar 
	* maemo-af-desktop/hildon-home/hildon-home-main.c: (set_default_background_image):
	Unlink and symlink default image files.
	* maemo-af-desktop/hildon-home/hildon-home-main.c: (hildon_home_initiliaze):
	Unlink and symlink default image files.
	* maemo-af-desktop/hildon-home/hildon-home-main.c: (hildon_home_construct_user_system_dir):
	Symlink userfilenames to default image files if no files.
	* maemo-af-desktop/hildon-home/hildon-home-image-loader.c: (save_original_bg_image_uri):
	Added unlink to prevent overwrite default file
	* maemo-af-desktop/hildon-home/hildon-home-image-loader.c: (main):
	Changed file saving order
	* maemo-af-desktop/hildon-home/hildon-home-main.h: removed extra define

2005-08-12  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	Added autogen.sh

2005-08-12  Karoliina Salminen  <karoliina.t.salminen@nokia.com>
  	
	* Fix to bug N#16297	
	Following changes done:
	* maemo-af-desktop-main.c: (maemo_af_desktop_main):
	status_bar_main() and status_bar_deinitialize() now expect panel
	parameter to be pointer to pointer, so calls to them were changed
	to comply with this change.
	* hildon-status-bar/hildon-status-bar-interface.h: Changed the
	defintion of status_bar_main and status_bar_deinitialize functions
	so that panel parameter is pointer to pointer. Done because
	changes to panel will have to be visible for the caller.
	* hildon-status-bar/hildon-status-bar-main.h: Changed the
	defintion of status_bar_main and status_bar_deinitialize functions
	so that panel parameter is pointer to pointer. Done because
	changes to panel will have to be visible for the caller.
	* hildon-status-bar-main.c:(main): status_bar_main() and
	status_bar_deinitialize() now expect panel parameter to be pointer
	to pointer, so calls to them were changed to correspond to this
	change.
	* hildon-status-bar-main.c:(status_bar_main),
	status_bar_deinitialize): Panel parameter was changed to
	pointer-to-pointer. Done because changes to it will have to be
	visible to the caller.

2005-08-11  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	* Fix to bug N#17092 to file maemo-af-desktop.postinst: Fixed postinstall target failing
	when no themes are installed

2005-08-10  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	     * Correction to bug "Multiple problems in Others menu item sorting"
	* others-menu.c: utf-8 stuff was removed

2005-08-09  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	     * Correction to bug "System reboots when Image Viewer is started after a search"
	* hildon-navigator/windowmanager.c: (determine_window_type):
	Prevent a crash by checking that we do not pass NULL pointers to g_str_equal()
	* hildon-navigator/windowmanager.c: (find_application_from_tree):
	Prevent a crash by checking that we do not pass NULL pointers to
	g_str_equal()
	* hildon-navigator/windowmanager.c: (property_notify_handler):
	Prevent a crash by checking that we do not pass NULL pointers to g_str_equal()
	* hildon-navigator/windowmanager.c: (find_service_from_tree):
	Prevent a crash by checking that we do not pass NULL pointers tog_str_equal()

2005-08-08  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	* Correction to bug "Changing home background image reboots"
	* maemo-af-desktop/hildon-home/hildon-home-main.c: Removeed one second delay before showing "Loading" cancel note.
	     * maemo-af-desktop/hildon-home/hildon-home-main.h: Removed ONE_SECOND define as unnecessary. Changed
	       show_loading_cancel_note prototype from gboolean to void and its parameters from gpointer user_data to void.

2005-08-08  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	     * Correction to bug "Task navigator crashes with incomplete .desktop files"
	     * Changed files: hildon-navigator/others-menu.c, hildon-navigator/windowmanager.c

2005-08-08  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	     * Correction to bug "Menu hardware key does not close menu"
	     * hildon-home/hildon-home-main.c: The corrected version now ignores repeated key presses.

2005-08-05  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	     * hildon-home/hildon-home-main.c: Corrected home from crashing from corrupted background image


2005-08-05  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	     * Applied patch which fixes bug "saved sketch.png picture can not be selected as background image".
	     * Cleaned up the code a bit after applying the patch - there was duplicate include for
	       log-functions.h (the one I had added and the one this patch added). The other one of them was removed.
	     * There is now additional line gtk_file_filter_add_pattern (mime_type_filter, "*.png"); after
	       the gtk_file_filter_add_mime_type statements.


2005-08-05  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	     * Icon corrected for OSSO_GN_NOTICE. 
	      "qgn_note_confirm",  /* OSSO_GN_NOTICE */ changed to "qgn_note_info",  /* OSSO_GN_NOTICE */


2005-08-04  Karoliina Salminen  <karoliina.t.salminen@nokia.com>

	     * hildon-navigator/windowmanager.c : Added automated topping of killed
	applications. 
	- Minimization support improvements required by
	automated topping fix. 
	- Handle a rare situation with 0-length _NET_CLIENT_LIST X property properly.
	* hildon-navigator/windowmanager.h: Added WM_MINIMIZED_ITEM
	 
