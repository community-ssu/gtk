2007-01-14  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreeselection.c (tree_column_is_sensitive),
	(_gtk_tree_selection_row_is_selectable): patched since
	selectable rows are not allowed to be insensitive.

	* gtk/gtktreeview.c (gtk_tree_view_focus_to_cursor): make sure
	we put the cursor on a row which can be selected,
	(gtk_tree_view_move_cursor_up_down),
	(gtk_tree_view_move_cursor_page_up_down): patched to only move
	the cursor to selectable rows.

2007-01-12  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkentry.c: port over "icon-width" style property.

2007-01-12  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreeview.c (gtk_tree_view_class_init),
	(gtk_tree_view_init): enable Maemo's view without expanders by
	disabling show-expanders and setting level indent to 10.

2007-01-12  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreeview.c (gtk_tree_view_init): make headers invisible
	by default.

2007-01-12  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreemodelsort.c (gtk_tree_model_sort_row_changed),
	(gtk_tree_model_sort_ref_node), (gtk_tree_model_sort_real_unref_node),
	(gtk_tree_model_sort_sort_level), (gtk_tree_model_sort_free_level),
	(gtk_tree_model_sort_clear_cache): port over ref counting fixes
	found in maemo-gtk-2-6 and upstream trunk (but not in upstream
	2.10).

2007-01-12  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkentry.c (gtk_entry_button_press): don't add
	entry->scroll_offset to entry->drag_start_y. Fixes the entry
	starting drags after ridiculously small mouse movements.
	(also backfolded fix to upstream)

2007-01-10  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtkcellrenderertext.c (gtk_cell_renderer_text_render): render
	cell in prelight state with GTK_STATE_NORMAL.

2007-01-10  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtkcellrenderertext.c (gtk_cell_renderer_text_init):
	initialize xpad, ypad to zero instead of two.

2007-01-10  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtkcellrenderertoggle.c (gtk_cell_renderer_toggle_class_init),
	(gtk_cell_renderer_toggle_get_property),
	(gtk_cell_renderer_toggle_set_property),
	(gtk_cell_renderer_toggle_render): port over checkbox-mode
	property.

2007-01-10  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtkcellrenderertoggle.c (gtk_cell_renderer_toggle_init):
	port over change which removes assignments to xpad, ypad.

2007-01-10  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtkcellrenderertoggle.c (gtk_cell_renderer_toggle_init):
        refactor to initialize indicator_size to TOGGLE_WIDTH instead
        of a hardcoded value.  (Merge from upstream).

2007-01-10  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtkcellrenderertoggle.c: change value of TOGGLE_WIDTH to
	26.

2007-01-10  Kristian Rietveld  <kris@imendio.com>

	* gkt/gtktreemodelfilter.c (gtk_tree_model_filter_row_deleted):
	silence compiler. (Doesn't happen upstream with gcc 4.x).

2007-01-10  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreemodelfilter.c
	(gtk_tree_model_filter_row_has_child_toggled): port over temporary
	change from g_assert() to g_return_if_fail().

2007-01-10  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreemodelfilter.c (gtk_tree_model_filter_init),
	(gtk_tree_model_filter_finalize), (gtk_tree_model_filter_row_deleted),
	(gtk_tree_model_filter_new): port over change which unsets
	the virtual root once that row is being deleted.  (This change is
	in 2.11 upstream, but not in 2.10).

2007-01-10  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkmodules.c (find_module): open modules with
	G_MODULE_BIND_LOCAL.

2007-01-10  Michael Natterer  <mitch@imendio.com>

	Merged from upstream trunk:

	* gtk/gtkrange.[ch]: added properties "fill-level",
	"show-fill-level" and "restrict-to-fill-level" and getters/setters
	for them. The "fill level" is an additional marker on the range's
	trough than can be e.g. used to indicate the amount of
	pre-buffering in a range showing the play position of streamed
	media. See the embedded API docs for details. Made GtkRangeLayout
	a GTypeInstance private struct and removed finalize()
	implementation. Fixes bug #349808

	* gtk/gtk.symbols: added the new symbols.

2007-01-05  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkwindow.c (gtk_window_key_release_event): chain up to
	the right function (also backfolded fix to upstream).

2007-01-05  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkimmodule.c (_gtk_im_module_get_default_context_id): drop
	"const" from return value.

2007-01-03  Kristian Rietveld  <kris@imendio.com>

	* gdk/x11/gdkwindow-x11.c (gdk_window_set_type_hint): revert
	previous fix build patch and move the dropdown and message hint cases
	to default: as per Tim's suggestion.

2007-01-03  Kristian Rietveld  <kris@imendio.com>

	* gdk/x11/gdkwindow-x11.c (utf8_is_latin1),
	(set_text_property), (set_wm_name), (gdk_window_set_title),
	(gdk_window_set_icon_name): disable code setting legacy ICCCM
	properties by wrapping the responsible code in ENABLE_ICCCM_LEGACY
	defines.

2007-01-03  Kristian Rietveld  <kris@imendio.com>

	* gdk/x11/gdkwindow-x11.c (gdk_window_set_type_hint): fix build by
	having the dropdown menu hint set the message hint.

2007-01-03  Kristian Rietveld  <kris@imendio.com>

	* gdk/x11/gdkdisplay-x11.c (gdk_display_open): allow to disable
	XSHM via GDK_DISABLE_XSHM environment variable.

2006-12-22  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtkwidget.[ch]: Ported over the tap and hold implementation
	from maemo-gtk-2-6.

	* gtk/gtktreeview.c
	* gtk/gtkcontainer.c
	* gtk/gtkbutton.c: Port over tap and hold support from maemo-gtk-2-6.

	* gtk/gtkmenu.[ch] (gtk_menu_init), (gtk_menu_popup): Partially
	port over _gtk_menu_enable_context_menu_behaviour() and related
	changes.

	* gtk/gtkiconfactory.c (init_icon_sizes): Initialize hildon icon
	sizes, don't scale icons with hildon icon size.

	* gtk/gtkicontheme.c: Support animations, don't prefer built in
	icons when looking up icons.

	* gtk/gtkstyle.c (gtk_default_render_icon): Ported over maemo-gtk-2-6
	change which refrains from scaling icons with hildon icon size.

	* gtk/updateiconcache.c: Port over support for animations.

2006-12-22  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkenums.h: add HILDON_ICON_SIZE_FOO GtkIconSize values.

2006-12-20  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtkimmulticontext.[ch]
	* gtk/gtkimcontext.c
	* gtk/gtkimmodule.h: Ported over code from maemo-gtk-2-6 to get
	the virtual keyboards running.

2006-12-20  Kristian Rietveld  <kris@imendio.com>

	* gdk/gdkwindow.h: move GDK_WINDOW_TYPE_HINT_MESSAGE to the same
	position in the enum as in maemo-gtk-2-6 to restore binary
	compatibility.

2006-12-15  Kristian Rietveld  <kris@imendio.com>

	* gdk/gdkwindow.h: added GDK_WINDOW_TYPE_HINT_MESSAGE.

	* gdk/x11/gdkwindow-x11.c (set_initial_hints): added Maemo specific
	code for setting _NET_WM_STATE since the TN relies on this,
	(gdk_window_set_type_hint),
	(gdk_window_get_type_hint): support HINT_MESSAGE.

2006-12-15  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkrc.c: added support for logical colors as they were in
	maemo-gtk-2-6, so we now parse both the new upstream format and
	the old one.

2006-12-15  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkwidget.h
	* gtk/gtktreeview.h
	* gtk/gtktoolbutton.h
	* gtk/gtkimcontext.h
	* gtk/gtkentry.h
	* gtk/gtkmenushell.h: added class struct changes (vtable entries).

2006-12-15  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkfilesystem.[ch] (gtk_file_system_render_icon): added this
	missing stub.

2006-12-13  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkwidget.[ch]
	* gtk/gtkrange.[ch]
	* gtk/gtktextview.[ch]
	* gtk/gtkstyle.[ch]
	* gtk/gtktextbuffer.[ch]
	* gtk/gtkwindow.[ch]
	* gtk/gtkimcontext.[ch]
	* gtk/gtkfilesystem.[ch]
	* gtk/gtkbutton.[ch]
	* gtk/gtkentry.[ch]: start migration stage 1: add all stubs of
	functions that were added to maemo-gtk-2-6. Didn't change any
	signals or vtable entries yet.

	* gtk/gtkenums.h: added the enums needed by the stubs.

2006-12-04  Tommi Komulainen  <tommi.komulainen@nokia.com>

	Export enough symbols for implementing GtkFileChooser interface
	outside gtk.

	* gtk/gtk.symbols: add hildon_gtk_file_chooser_install_properties
	* gtk/Makefile.am (INCLUDES): add -DGTK_FILE_CHOOSER_ENABLE_UNSUPPORTED
	(gtk_private_h_sources, gtk_semi_private_h_sources): export
	gtkfilesystemmodel.h, gtkfilechooserprivate.h, and
	gtkfilechooserutils.h as semi-private
	* gtk/gtkfilechooserutils.c
	(hildon_gtk_file_chooser_install_properties): add exported version of 
	_gtk_file_chooser_install_properties
	* gtk/gtkfilesystemmodel.h: add GTK_FILE_SYSTEM_ENABLE_UNSUPPORTED
	#ifdef guard
	* gtk/gtkfilechooserprivate.h: add GTK_FILE_CHOOSER_ENABLE_UNSUPPORTED
	#ifdef guard
	* gtk/gtkfilechooserutils.h: add GTK_FILE_CHOOSER_ENABLE_UNSUPPORTED
	#ifdef guard, declare hildon_gtk_file_chooser_install_properties

	* tests/autotestfilechooser.c: build with
	GTK_FILE_CHOOSER_ENABLE_UNSUPPORTED
