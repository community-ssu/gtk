2007-03-08  Xan Lopez  <xan.lopez@nokia.com>

	* gtk/gtkentry.c: Remove the icon-width property, it's unused.

2007-03-05  Xan Lopez  <xan.lopez@nokia.com>

	* gtk/gtkicontheme.c: Back out our changes to the icon loading order.
	This should fix stock icons being broken and has no noticeable performance
	differences in out tests.

2007-02-21  Lucas Rocha  <lucas.rocha@nokia.com>

	* gtk/gtkiconview.c: surround all changes made on selection behavior
	with MAEMO_CHANGES ifdefs.

Wed Feb 21 13:43:33 2007  Tim Janik  <timj@gtk.org>

	* gtkprogressbar.c: adapt minimum progressbar height (used for progress
	bars without text) to maemo theme image height.

2007-02-20  Lucas Rocha  <lucas.rocha@nokia.com>

	* gtk/gtkiconview.c: selection painted around the item, not just the
	text.
	(gtk_icon_view_paint_item): paint selection around the role item
	instead of just around the text cell. If an editable/activatable 
	cell is found, draw focus on it. If none is found, draw focus  
	around the whole item.
	(gtk_icon_view_button_press): handle button press considering button
	press inside item's area, not only on item cells.
	(gtk_icon_view_get_path_at_pos): consider the whole item area, not
	only its cells.

2007-02-20  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkcombobox.c (gtk_combo_box_list_key_press): pop down
	on F4 (= menu) and F5 (= home) (can't be done via gtkrc).

2007-02-20  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtkcellrenderertoggle.c: back out checkbox-mode.

2007-02-20  Kristian Rietveld  <kris@imendio.com>

	* gdk/gdkwindow.h: modify GdkWindowTypeHint so that we don't end
	the enumerator list with a comma.  (MB#1087).

2007-02-20  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkmenuitem.c (_gtk_menu_item_popup_submenu): queue a draw
	on the menu item so the changed arrow shadow becomes visible.

2007-02-20  Kristian Rietveld  <kris@imendio.com>

	Merge from upstream trunk:

    2006-12-15  Dom Lachowicz <domlachowicz@gmail.com>

	* gtk/gtkcombobox.c: Make GtkComboBox in "appears-as-list" mode
	more closely resemble its Win32 counterpart. Bug #340204.

2007-02-20  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkmenuitem.c (gtk_menu_item_paint): clean up yesterday's
	commit: change HILDON_ARROW_SPACE of 6 pixels to ARROW_PADDING of
	4 pixels because that's how it's used. Use GTK_STATE_NORMAL
	instead of 0. Cleaned up a bit and added comments.

2007-02-19  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkmenuitem.c (gtk_menu_item_paint): port over changes to
	menu item drawing when there is a submenu.

2007-02-16  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkcombobox.c (gtk_combo_box_menu_setup)
	(gtk_combo_box_list_setup): if the child widget is a GtkEntry,
	unset CAN_FOCUS on the toggle button.

	(gtk_combo_box_list_button_pressed): grab the focus on the combo
	box, which implicitly grabs the right widget due to grab_focus()
	virtualization.

2007-02-16  Tommi Komulainen  <tommi.komulainen@nokia.com>

	* gtk/gtkwidget.c (gtk_widget_realize): Call
	gtk_widget_set_extension_events_internal even with !NO_WINDOW - it
	does the right checks to ensure it only touches windows belonging to
	the widget. MB#1060

Thu Feb 15 15:18:37 2007  Tim Janik  <timj@gtk.org>

	* gtk/gtkdialog.c: added style property ::content-area-spacing, to
	allow configurable area spacing similar to the style properties 
	::button-spacing and ::content-area-border, upstream #408244.

Thu Feb 15 13:17:52 2007  Tim Janik  <timj@gtk.org>

	* gtk/gtkarrow.c (gtk_arrow_expose): removed arrow size down scaling
	to 70% to allow full arrow themability in maemo.

Thu Feb 15 11:45:41 2007  Tim Janik  <timj@gtk.org>

	* gdk/gdkinternals.h: applied patch to reduce scratch image sizes,
	this is in place to save server side memory resources.

2007-02-15  Michael Natterer  <mitch@imendio.com>

	Merged from upstream trunk:

	* gtk/gtkmenushell.c: remove two antique function typedefs that
	are probably obsolete for ages.

2007-02-15  Michael Natterer  <mitch@imendio.com>

	Port over the remaining logic changes from maemo-gtk-2-6. The
	menus should behave as specified now.

	* gtk/gtkmenushell.c: add private memmbers "activated_submenu" and
	"first_click".

	(gtk_menu_shell_button_press)
	(gtk_menu_shell_button_release)
	(gtk_menu_shell_button_enter_notify)
	(gtk_menu_shell_button_leave_notify): activate submenus on button
	events.

	(gtk_menu_shell_real_select_item): don't activate submenus on item
	selection.

	(gtk_menu_shell_activate_item)
	(gtk_menu_shell_select_submenu_first)
	(gtk_menu_shell_activate_current): changed submenu activation
	and deactivation behavior.

	(gtk_real_menu_shell_move_current): deactivate submenu when
	keyboard-navigating to parent.

	(_gtk_menu_shell_set_first_click): new private api.

	* gtk/gtkmenushell.h: add _gtk_menu_shell_set_first_click().

	* gtk/gtkmenu.c (gtk_menu_popup): call
	_gtk_menu_shell_set_first_click().

2007-02-14  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreeview.c (gtk_tree_view_grab_notify): stop possibly
	pending activate, collapse, expand operations when the grab is
	lifted.

Wed Feb 14 15:57:12 2007  Tim Janik  <timj@gtk.org>

	* gtk/gtkrange.c: applied arrow_paint_box_layout MAEMO patch to
	allocate range arrows with the maximum available space.

2007-02-14  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreeview.c (gtk_tree_view_bin_expose): move around
	some code so the drag drop position indicators are drawn
	before the cell contents.

2007-02-14  Michael Natterer  <mitch@imendio.com>

	Fix automatic popdown of obscured menus:

	* gtk/gtkmenu.c (gtk_menu_init): add GDK_VISIBILITY_NOTIFY_MASK
	to menu->toplevel's event mask.

	* gtk/gtkmenu.c (gtk_menu_position)
	* gtk/gtkmenuitem.c (gtk_menu_item_position_menu): use
	GDK_WINDOW_TYPE_HINT_MENU in newly added calls to
	gtk_window_set_type_hint().

2007-02-14  Kristian Rietveld  <kris@imendio.com>

	Merge from upstream trunk:

	* gtk/gtktreeviewcolum.c (_gtk_tree_view_column_realize_button):
	use TREE_VIEW_DRAG_WIDTH/2 when calculating the drag window
	position instead of a hardcoded value.

2007-02-14  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkmenu.c (gtk_menu_motion_notify): don't forget to set the
	state of the synthesized GDK_ENTER_NOTIFY event. Fix also merged
	to upstream trunk.

2007-02-14  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreeviewcolumn.c (gtk_tree_view_column_create_button),
	(gtk_tree_view_column_update_button): make the alignment expand
	the child so ellipsizing labels in column headers work
	correctly.

2007-02-14  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtkbutton.c (gtk_button_class_init),
	(gtk_button_size_request), (gtk_button_size_allocate),
	(_gtk_button_paint): add tree-view-separator-area style
	property for reserving space for a separator between column
	headers and the tree view.

Tue Feb 13 16:57:52 2007  Tim Janik  <timj@gtk.org>

	* gtk/gtkframe.c:  Fix a problem with large y thickness.
	(#136592, Xan Lopez)

2007-02-13  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkmenuitem.[ch]: factor out _gtk_menu_item_popdown_submenu().

2007-02-13  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtkfilesystem.h (enum GtkFileSystemError): add
	GTK_FILE_SYSTEM_ERROR_TIMEOUT.

2007-02-08  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkdialog.c (gtk_dialog_init): use GTK_BUTTONBOX_CENTER for
	the action area.

2007-02-08  Michael Natterer  <mitch@imendio.com>

	Merge from upstream trunk:

    Thu Feb  8 13:07:08 2007  Tim Janik  <timj@imendio.com>

	* applied patch from Xan Lopez which adds GTK_BUTTONBOX_CENTER to
	GtkButtonBox (bug #336159).

	* gtk/gtkenums.h:
	* gtk/gtkvbbox.c, gtk/gtkhbbox.c, gtk/gtkbbox.c:
	support GTK_BUTTONBOX_CENTER.

	* tests/testbbox.c: new button box test, which allows testing of 
	the various button box properties.

	* tests/testgtk.c: added GTK_BUTTONBOX_CENTER. to button box test.

Tue Feb  6 15:53:59 2007  Tim Janik  <timj@imendio.com>
 
	* gtk/gtktextview.c (gtk_text_view_motion_event):
	* gtk/gtkspinbutton.c (gtk_spin_button_motion_notify):
	* gtk/gtkaboutdialog.c (credits_motion_notify_event):
	* gtk/gtkhruler.c (gtk_hruler_motion_notify):
	* gtk/gtkvruler.c (gtk_vruler_motion_notify): 
	* gtk/gtkentry.c (gtk_entry_motion_notify):
	* gtk/gtktooltip.c (_gtk_tooltip_handle_event):
	* gtk/gtkhsv.c (gtk_hsv_motion): call gdk_event_request_motions()
	for new motion events after receiving motion hints.
 
	* gdk/gdkevents.[hc]: added gdk_event_request_motions().
 
2007-02-07  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtkdialog.c: revert last change, since it will be replaced
	by an upstream feature.

2007-02-07  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtkdialog.c (gtk_dialog_init): pack an alignment in the vbox,
	and the action_area in the alignment to get the buttons centered.

2007-02-07  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtkprogressbar.c (gtk_progress_bar_new): pass text-xalign = 0.0
	as construct-only property.

2007-02-07  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtkfilechooserutils.[ch]
	(hildon_gtk_file_chooser_install_properties): conditionalize with
	MAEMO_CHANGES, port over doc comment.

2007-02-06  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreeview.c (gtk_tree_view_real_expand_row): Make sure the
	newly expanded row, and if possible its children, are visible to
	the user.

2007-02-06  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreeprivate.h: set TREE_VIEW_DRAG_WIDTH to 28.

2007-02-06  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreeselection.c (gtk_tree_selection_set_mode): when
	switching to a single selection mode, make sure the cursor is on
	a selected row.

Tue Feb  6 14:06:07 2007  Tim Janik  <timj@imendio.com>

	* gtk/gtkcombobox.c (gtk_combo_box_class_init): added missing 
	::autodimmed-button registration.

2007-02-06  Kristian Rietveld  <kris@imendio.com>

	Merge from upstream trunk:

	* gtk/gtktreeview.c (gtk_tree_view_row_changed): remove unused
	style_get of vertical-separator. (#403165, Chris Wilson).

2007-02-05  Tommi Komulainen  <tommi.komulainen@nokia.com>

	* gtk/gtkmenu.c (gtk_menu_paint): Paint the scroll arrow backgrounds
	using 'menu_scroll_arrow_up' and 'menu_scroll_arrow_down' details
	instead of generic 'menu' (#404571)
	This keeps sapwood from applying window shape mask to inappropriate
	places.

2007-02-05  Michael Natterer  <mitch@imendio.com>

	Merge from upstream trunk:

	* gtk/gtksettings.c: add new boolean settings gtk-enable-accels
	and gtk-enable-mnemonics which enable/disable accelerators and
	mnemonics (bug #72375, based on a patch from Tommi Komulainen).

	* gtk/gtkwindow.c (gtk_window_activate_key)
	* gtk/gtkmenushell.c (gtk_menu_shell_key_press): don't invoke them
	if the resp. setting is FALSE.

	* gtk/gtkaccellabel.c (gtk_accel_label_refetch)
	* gtk/gtklabel.c (gtk_label_set_pattern_internal): don't display
	them if the setting is FALSE.

	* gtk/gtklabel.c: added signal connection to the screen's settings
	object and traverse all widgets on the screen when the setting
	changes. It's slightly ugly to also update GtkAccelLabels here,
	but less ugly than connecting and traversing all widgets twice.

2007-02-05  Michael Natterer  <mitch@imendio.com>

	Merge from upstream:

	* gtk/gtktextbuffer.h (enum GtkTextBufferTargetInfo): changed
	values from G_MAXUINT-0, -1, -2 to -1, -2, -3 so we stay within
	ansi C enum value limits. Fixes bug #46757.

2007-02-02  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreeview.c (gtk_tree_view_real_expand_collapse_cursor_row):
	move focus forward/backward if expand/collapse fails.

2007-02-02  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreeview.c (gtk_tree_view_class_init): add row-insensitive
	signal,
	(gtk_tree_view_real_set_cursor): emit row-insensitive and return
	if the row is not selectable.

2007-02-02  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreeview.c (gtk_tree_view_stop_rubber_band),
	(gtk_tree_view_update_rubber_band_selection): make the cursor
	follow the stylus during pen dragging,
	(gtk_tree_view_update_rubber_band): do not invalidate region
	of the rubber banding rectangle since we don't draw it.

2007-02-02  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreeprivate.h (struct _GtkTreePrivate): add
	queued_expand_row and queued_activate_row fields.

	* gtk/gtktreeview.c (gtk_tree_view_init), (gtk_tree_view_destroy),
	(gtk_tree_view_set_model): bookkeeping for new queued rows,
	(gtk_tree_view_button_press), (gtk_tree_view_button_release): handle
	row activation when tapping on a selected cursor row, handle
	expand/collapse on tap, disable double clicks,
	(gtk_tree_view_motion_bin_window): dequeue expand, activate and
	select rows.

2007-02-01  Michael Natterer  <mitch@imendio.com>

	Merge from upstream trunk:

	* gtk/gtkmenu.c (gtk_menu_paint): pass &event->area to
	gtk_paint_box() calls.

2007-02-01  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkmenu.c: port over the remaining context_menu stuff.

2007-02-01  Michael Natterer  <mitch@imendio.com>

	Merge from upstream trunk:

	* gtk/gtkmenu.c (gtk_menu_button_press)
	(gtk_menu_button_release)
	(gtk_menu_button_scroll): remove redundant and confusing
	if (GTK_IS_MENU (widget)) checks because "widget" is always a
	GtkMenu here.

Thu Feb  1 13:19:58 2007  Tim Janik  <timj@imendio.com>

        * gtk/gtkcombobox.c: added ::autodimmed_button style proeprty to 
	atuomatically make a combobox insensitive for empty models.

        * gtk/gtkcombobox.c (gtk_combo_box_list_destroy): remove extra reference
        that gtkcombobox keeps on priv->popup_widget if it's a tree view.

2007-02-01  Kristian Rietveld  <kris@imendio.com>

	A first patch to get pen dragging going.

	* gtk/gtktreeview.c (gtk_tree_view_class_init),
	(gtk_tree_view_init), (gtk_tree_view_destroy),
	(gtk_tree_view_button_press), (gtk_tree_view_button_release),
	(gtk_tree_view_update_rubber_band_selection),
	(gtk_tree_view_bin_expose), (gtk_tree_view_set_model): slightly
	modify the rubber banding code to mimic the pen dragging found
	in maemo-gtk-2-6.  Changes include: disabling drawing the rubber
	band, do not immediately set the cursor on button press,
	don't select insensitive rows when rubber banding.

	* gtk/gtktreeprivate.h (struct _GtkTreePrivate): add
	queued_select_row field.

2007-01-30  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkentry.c (gtk_entry_real_activate): port over
	tab-forward-on-activate.

2007-01-29  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkaccellabel.c
	* gtk/gtklabel.c
	* gtk/gtkmenushell.c
	* gtk/gtksettings.c
	* gtk/gtkwindow.c: revert hildon-keyboard-shortcuts patch, it will
	be replaced by the upstream version (see gnome bug #72375).

2007-01-29  Michael Natterer  <mitch@imendio.com>

	Removed MAEMO_CHANGES stuff from this change, because it has been
	merged to upstream:

	* gtk/gtkmenuitem.c: port over queueing a draw on the parent menu
	item on item select/deselect.

2007-01-29  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkmenuitem.c: port over: open submenus on activation and
	don't open them on select.

2007-01-29  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkmenuitem.c: port over queueing a draw on the parent menu
	item on item select/deselect.

2007-01-29  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkmenu.c: port over handling of visibility-notify-event to
	pop down menus when they become obscured.

2007-01-29  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkmenu.c (gtk_menu_popup): port over selecting of first
	item if none is selected.

2007-01-29  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkmenu.c (gtk_menu_init): port over changing the window
	type from POPUP to TOPLEVEL and setting GDK_WINDOW_TYPE_HINT_MENU.

2007-01-28  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtkimmulticontext.c: conditionalize with MAEMO_CHANGES.

2007-01-28  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreeview.c: conditionalize with MAEMO_CHANGES.

2007-01-28  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreemodelfilter.c: conditionalize with MAEMO_CHANGES.

2007-01-28  Kristian Rietveld  <kris@imendio.com>

	* gdk/x11/gdkwindow-x11.c (set_initial_hints): only declare
	propmode when MAEMO_CHANGES is enabled.

Fri Jan 26 15:31:35 2007  Tim Janik  <timj@imendio.com>

	* Backports:

	* gtk/gtkentrycompletion.c:
	* gtk/gtkcombobox.c:
	* gtk/gtkmenu.c: set various widget names to allow style and theme
	alterations via rc-file definitions.

	* gtk/gtkcombobox.c (gtk_combo_box_set_popup_widget): explicitely set
	frame border width to 0, since the default frame border width might be
	altered by other maemo patches.

2007-01-26  Michael Natterer  <mitch@imendio.com>

	* modules/input/gtkimcontextxim.c (gtk_im_context_xim_finalize):
	destroy the XIM only if it exists (applied the same fix to
	upstream trunk).

Wed Jan 24 14:26:29 2007  Tim Janik  <timj@imendio.com>

	* Backports:

    2006-09-21  Xan Lopez  <xan.lopez@nokia.com>

	* gtk/gtkstyle.c (draw_insertion_cursor): 
	Change the x coord of the cursor at line start so it's completely visible
	when we offset it. Fixes NB#38922.

2007-01-26  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkentrycompletion.c (gtk_entry_completion_insert_prefix): 
	only block/unblock completion->priv->insert_text_id if it is
	actually connected (applied the same fix to upstream trunk).

2007-01-25  Michael Natterer  <mitch@imendio.com>

	Port over, clean up and fixed the hildon-keyboard-shortcuts patch.
	Also prevents invocation of shortcuts now (not only disables them
	visually).

	* gtk/gtksettings.c: add the setting.

	* gtk/gtkaccellabel.c
	* gtk/gtklabel.c: disable them visually.

	* gtk/gtkwindow.c
	* gtk/gtkmenushell.c: disable their invocation.

Thu Jan 25 14:44:44 2007  Tim Janik  <timj@imendio.com>

	* gtk/gtkimmulticontext.h: 
	* gtk/gtkimmodule.h:
	* gtk/gtkimmodule.c: fixed MAEMO_CHANGES guarding const.

Thu Jan 25 14:08:30 2007  Tim Janik  <timj@imendio.com>

	* gtk/gtktreeselection.c: conditionalize with MAEMO_CHANGES.

Thu Jan 25 13:55:47 2007  Tim Janik  <timj@imendio.com>

	* gtk/gtkcellrenderertext.c:
	* gtk/gtkcellrenderertoggle.c:
	* gtk/gtktreeview.h: conditionalize with MAEMO_CHANGES.

Thu Jan 25 12:44:35 2007  Tim Janik  <timj@imendio.com>

	* gtk/gtktextbuffer.h: conditionalize with MAEMO_CHANGES.

Thu Jan 25 12:40:07 2007  Tim Janik  <timj@imendio.com>

	* gtk/gtkiconfactory.c:
	* gtk/gtkfilesystem.c:
	* gtk/gtkfilesystem.h:
	* gtk/gtkicontheme.c: conditionalize with MAEMO_CHANGES.

	* gtk/gtkicontheme.c: restored occasionally removed
	original code portions.

Thu Jan 25 11:46:15 2007  Tim Janik  <timj@imendio.com>

	* gtk/gtkimmulticontext.h:
	* gtk/gtkimcontext.[hc]:
	* gtk/gtktextbuffer.c:
	* gtk/gtkimmodule.h: conditionalize with MAEMO_CHANGES.

2007-01-24  Michael Natterer  <mitch@imendio.com>

	Merge from upstream trunk:

	* gtk/gtkwidget.c (gtk_widget_set_state): revert generic disabling
	of PRELIGHT state for the reasons given in bug #135666. Widget
	states are sometimes abused or otherwise used wrongly for historic
	reasons, causing this part of the patch to break e.g. menu items.

2007-01-24  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkscrolledwindow.c (gtk_scrolled_window_size_allocate):
	port over "keep focussed child visible when size changes".

2007-01-24  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkrc.c (gtk_rc_reparse_all_for_settings): port over parsing
	order change: parse theme and key theme first (makes styles
	available when parsing with gtk_rc_context_parse_string)

Wed Jan 24 14:11:58 2007  Tim Janik  <timj@imendio.com>

	* gtk/gtktoolbutton.h (struct _GtkToolButtonClass): 
	* gtk/gtkmenushell.h (struct _GtkMenuShellClass): removed unused MAEMO
	function pointers. they didn't really change ABI since they were simple
	renames from gtk_reserved* and keeping the symbol names would just hide
	erroneous uses in third-party components.

Wed Jan 24 13:37:41 2007  Tim Janik  <timj@imendio.com>

	* gtkwidget.c: ported GtkWidget::insensitive-press from maemo-gtk-2-6,
	which is used to display tooltips/info upon button clicks on insensitive
	widgets. completed gtk_widget_insensitive_press() body.

	* gtktoolbutton.c: proxy ::insensitive-press from button child.

	* gtktoolbutton.h: renamed unused ->UNUSED_insensitive_press pointer
	to catch erroneous uses, GtkWidget::insensitive-press should be used instead.

	* gtkcombobox.c: proxy ::insensitive-press from child widgets.

	* gtkmenushell.c: proxy ::insensitive-press to menu items.

	* gtkmain.c: emit GtkWidget::insensitive-press.

	* gtk/gtkenums.h: fixed enum value syntax to please glib-mkenums, added
	MAEMO_CHANGES-ifdefs.

2007-01-24  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkwidget.c: port over set_extension_events_internal() which
	allows setting extension events on already realized widgets (applied
	updated and cleaned up patch from upstream bug #379550).

2007-01-24  Michael Natterer  <mitch@imendio.com>

	* gdk/gdkwindow.h (enum GdkWindowTypeHint): do not use maemo enum
	values outside the #ifdef MAEMO_CHANGES blocks.

2007-01-23  Michael Natterer  <mitch@imendio.com>

	Backport configurable GtkComboBox arrow size from upstream trunk:

    2006-11-01  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtkcombobox.c (gtk_combo_box_class_init),
	(gtk_combo_box_size_request): add arrow-size property to control
	the minimum size of the arrow, have the arrow scale up with the
	font by default. (#357950).

2007-01-23  Michael Natterer  <mitch@imendio.com>

	Backport new GtkProgressBar style properties from upstream trunk:

    Fri Jul 14 16:13:37 2006  Tim Janik  <timj@gtk.org>

	* gtk/gtkprogressbar.c: introduced ::xspacing and ::yspacing style 
	properties which make all hardcoded padding and spacing values
	configurable. properly swap ::text-xalign treatment for RTL widgets.

	* gtk/gtkprogress.c: fixed style property blurbs. made alignment 
	proeprty more consistent with GtkMisc alignment blurbs. mention
	RTL treatment for text-xalign.

2007-01-23  Michael Natterer  <mitch@imendio.com>

	* gtk/gtktextview.c (gtk_text_view_size_allocate): keep cursor
	visible when the size changes (like when IM opens).

2007-01-23  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkentry.[ch]
	* gtk/gtktextview.[ch]: conditionalize maemo changes with
	MAEMO_CHANGES.

Tue Jan 23 14:59:06 2007  Tim Janik  <timj@imendio.com>

	* gtk/gtkmenushell.h: conditionalize maemo changes with MAEMO_CHANGES.

Tue Jan 23 14:33:33 2007  Tim Janik  <timj@imendio.com>

	* gtk/gtkstyle.c (gtk_default_render_icon): fixed MAEMO_CHANGES
	conditionalization overlooked earlier.

Tue Jan 23 14:11:26 2007  Tim Janik  <timj@imendio.com>

	* gtk/updateiconcache.c:
	* gtk/gtktoolbutton.h:
	* gtk/gtkcontainer.c:
	* gtk/gtkbutton.[hc]:
	* gtk/gtkmenu.[hc]: conditionalize maemo changes with MAEMO_CHANGES.

Tue Jan 23 13:54:49 2007  Tim Janik  <timj@imendio.com>

	* gtk/gtkwindow.[hc]:
	* gtk/gtkwidget.[hc]:
	* gtk/gtkrange.[hc]:
	* gtk/gtkstyle.[hc]:
	* gtk/gtkrc.[hc]: conditionalize maemo changes with MAEMO_CHANGES.

Tue Jan 23 13:49:31 2007  Tim Janik  <timj@imendio.com>

	* gdk/x11/gdkwindow-x11.c: 
	* gdk/gdkwindow.h: conditionalize maemo changes with MAEMO_CHANGES.

Tue Jan 23 13:16:20 2007  Tim Janik  <timj@imendio.com>

	* configure.in: always define -DMAEMO_CHANGES to allow 
	conditionalized code.

2007-01-23  Michael Natterer  <mitch@imendio.com>

	* gtk/gtktextview.c: port over all IM and hildon-input-mode
	related changes.

2007-01-23  Michael Natterer  <mitch@imendio.com>

	Merge remaining gdkinput changes:

    2006-11-28  Tommi Komulainen  <tommi.komulainen@nokia.com>

	* gdk/x11/gdkinput-x11.c (_gdk_input_common_other_event): Call
	_gdk_event_button_generate to get GDK_2BUTTON_PRESS events properly
	synthesized. NB#48648

    2006-11-27  Tommi Komulainen  <tommi.komulainen@nokia.com>

	* gdk/x11/gdkinput.c (gdk_input_set_extension_events): Stop leaking
	memory when called multiple times to enable extension events. Get the
	root relative geometry in case we're called after ConfigureNotify.

    2006-11-07  Tommi Komulainen  <tommi.komulainen@nokia.com>

	* gdk/x11/gdkinput-x11.c (gdk_input_translate_coordinates): When
	maximum value for x/y axis is -1 or 0 use the screen size. NB#46445,
	#371930

    2006-09-18  Tommi Komulainen  <tommi.komulainen@nokia.com>

        * gdk/x11/gdkinput-x11.c (gdk_input_device_new): Always enable
        extension events for 'pen' devices to get touchscreen pressure. 

2007-01-23  Michael Natterer  <mitch@imendio.com>

	* gdk/x11/gdkinput-xfree.c: g_return_if_fail on the right objects.

2007-01-19  Michael Natterer  <mitch@imendio.com>

	Backport infrastructure and changes for notification on failed
	keyboard navigation:

    2007-01-03  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtktextview.c: Rework the beep-on-uninserted-text
	by calling the input method regardless of editability,
	and beeping from the commit/preedit-changed handlers.
	(#390514, Yevgen Muntyan)

    2007-01-02  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkrange.c (gtk_range_scroll) (gtk_range_move_slider): beep
	when a keybinding didn't change adjustment->value.

    2007-01-02  Matthias Clasen  <mclasen@redhat.com>

	* gtk/gtktextbuffer.c (gtk_text_view_key_press_event):
	Try harder not to beep on events which are not meant to
	insert stuff in the buffer.  (#390514, Yevgen Muntyan) 

    2006-11-24  Michael Natterer  <mitch@imendio.com>

	* gtk/gtktreeview.c (gtk_tree_view_move_cursor_up_down): if we
	can't go up/down, consult gtk_widget_keynav_failed() and leave the
	widget if it returns FALSE (bug #322640).

    2006-11-16  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkradiobutton.c (gtk_radio_button_focus): don't use
	gtk_widget_keynav_failed(). Instead, look at gtk-keynav-cursor-only
	and gtk-keynav-wrap-around and wrap around, beep or continue outside
	the group manually (bug #322640).

    2006-11-16  Michael Natterer  <mitch@imendio.com>

	Add new infrastructure for notifications of failed keyboard
	navigation and navigation with restricted set of keys.

	The patch handles configurable beeping, navigating the GUI with
	cursor keys only (as in phone environments), and configurable
	wrap-around. Fixes bugs #322640, #70986, #318827, #334726, #334742
	and #309291.

	* gtk/gtksettings.c: added properties gtk-keynav-cursor-only,
	gtk-keynav-wrap-around and gtk-error-bell.

	* gtk/gtkwidget.[ch]: added new signal "keynav-failed" and public
	API to emit it. Added New function gtk_widget_error_bell() which
	looks at the gtk-error-bell setting and calls gdk_window_beep()
	accordingly.

	* gtk/gtk.symbols: add the new widget symbols.

	* gtk/gtkcellrendereraccel.c
	* gtk/gtkimcontextsimple.c
	* gtk/gtkmenu.c
	* gtk/gtknotebook.c: use gtk_widget_error_bell() or look at the
	gtk-error-bell setting instead of calling gdk_display_beep()
	unconditionally.

	* gtk/gtkcombobox.c
	* gtk/gtkentry.c
	* gtk/gtkiconview.c
	* gtk/gtklabel.c
	* gtk/gtkmenushell.c
	* gtk/gtkspinbutton.c
	* gtk/gtktextview.c
	* gtk/gtktreeview.c: call gtk_widget_error_bell() on failed keynav.

	* gtk/gtkentry.c
	* gtk/gtklabel.c
	* gtk/gtkrange.c
	* gtk/gtktextview.c: consult gtk_widget_keynav_failed() on failed
	cursor navigation and leave the widget if it returns FALSE.

	* gtk/gtkmenushell.c
	* gtk/gtknotebook.c: only wrap around if gtk-keynav-wrap-around
	is TRUE.

	* gtk/gtkradiobutton.c: ask gtk_widget_keynav_failed() to decide
	whether to to wrap-around, and don't select active items on cursor
	navigation if gtk-keynav-cursor-only is TRUE. Should look at
	gtk-keynav-wrap-around too, will look into that.

2007-01-19  Michael Natterer  <mitch@imendio.com>

	Backport combo box keynav changes:

    2006-10-12  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkcombobox.c (gtk_combo_box_class_init): fix commit below
	(committed the wrong patch).

    2006-10-12  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkcombobox.c: added "move-active" and "popup" signals and
	bindings to trigger them. Removed gtk_combo_box_key_press(), it's
	obsolete now. Fixes bug #358293.

2007-01-19  Michael Natterer  <mitch@imendio.com>

	Backport unbinding of keybindings, needed for combo box kaynav:

    Wed Oct 11 14:31:30 2006  Tim Janik  <timj@imendio.com>

	* docs/reference/gtk/gtk-sections.txt:
	* gtk/gtkbindings.c: document gtk_binding_entry_skip().

    Tue Oct 10 16:38:23 2006  Tim Janik  <timj@imendio.com>

	* gtk/tmpl/gtkbindings.sgml: 
	* gtk/gtkbindings.c: applied patch from Michael Natterer to move to 
	inline docs. applied wording fixes suggested by Martyn Russell.

    2006-10-05  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkrc.[ch]: added new scanner token "unbind" which gets
	rid of a key binding (in fact, it only lets it appear unbound).

	* gtk/gtkbindings.[ch] (struct GtkBindingEntry): added
	"guint marks_unbound : 1"

	(gtk_binding_entry_skip): new API which marks the entry as unbound.

	Changed code so it returns FALSE when "marks_unbound == TRUE" is
	encountered while activating bindings, effectively letting the
	binding appear unbound (regardless of still existing bindings in
	lower binding priority levels). Fixes bug #358329.

	(gtk_binding_entry_add)
	(gtk_binding_entry_clear)
	(gtk_binding_entry_add_signall)
	(gtk_binding_parse_binding): deprected these functions.

	(_gtk_binding_parse_binding)
	(_gtk_binding_entry_add_signall): new internal API.

	* gtk/gtk.symbols: changed accordingly.

2007-01-19  Michael Natterer  <mitch@imendio.com>

	Backport gdk_window_beep() from upstream trunk, needed
	for the keynav_failed() backport:

    2006-09-13 Michael Emmel <mike.emmel@gmail.com>

	* gdk/directfb/gdkwindow-directfb.c fixed beep compile error

    2006-09-03  Tor Lillqvist  <tml@novell.com>

	* gdk/win32/gdkwindow-win32.c (gdk_window_beep): No
	GDK_WINDOW_DISPLAY in the Win32 backend.

    2006-08-31  Michael Natterer  <mitch@imendio.com>

	* gdk/x11/gdkwindow-x11.c (gdk_window_beep): Fix build.

    2006-08-30  Richard Hult  <richard@imendio.com>

	* gdk/quartz/gdkwindow-quartz.c (gdk_window_beep): Fix build.

    2006-08-30  Matthias Clasen  <mclasen@redhat.com>

	* gdk/x11/gdkwindow-x11.c (gdk_window_beep): Only use XKB
	for beeping if we are using XKB.  

    2006-08-29  Matthias Clasen  <mclasen@redhat.com>

	* gdk/gdkwindow.h: 
	* gdk/gdk.symbols: 
	* gdk/directfb/gdkwindow-directfb.c (gdk_window_beep): 
	* gdk/win32/gdkwindow-win32.c (gdk_window_beep): 
	* gdk/quartz/gdkwindow-quartz.c (gdk_window_beep): 
	* gdk/x11/gdkwindow-x11.c (gdk_window_beep): Add a function
	to beep on a window. For X11, implement this with
	XkbBell.  (#353455, Mariano Su√°rez-Alvarez)

2007-01-19  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreeview.c (gtk_tree_view_motion_bin_window),
	(add_scroll_timeout), (gtk_tree_view_drag_motion): factor out
	add_scroll_timeout().  (Backfolded to upstream).

2007-01-18  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkcheckbutton.c
	* gtk/gtkdnd.c
	* gtk/gtkentry.c
	* gtk/gtkmenu.c
	* gtk/gtktreeview.c
	* gtk/gtkviewport.c: pass more clip rectangles to gtk_paint_foo()
	functions (backfolded to upstream).

2007-01-18  Michael Natterer  <mitch@imendio.com>

	Port fixes from upstream 2.12:

    Wed Sep 20 16:59:38 2006  Tim Janik  <timj@imendio.com>

	* gtk/gtkviewport.c: always update the bin_window position and size
	in size_allocate, even if we don't have a visible child. this fixes
	expose artefacts as described in #313508.

	* gtk/gtkscrolledwindow.c: make hiding of automatic scrollbars when we
	have no visible child explicit.

2007-01-17  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreeview.c (gtk_tree_view_class_init),
	(validate_row): port over the separator-height style property.

2007-01-17  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreeview.c (gtk_tree_view_row_changed): if the row just
	became insensitive, unselect it.

	* gtk/gtktreeselection.c (gtk_tree_selection_real_select_node):
	allow insensitive rows to be unselected.

2007-01-16  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkentry.c: port over all IM, invalid-input and
	hildon-input-mode related changes with one small exception
	(commented on in the code).

2007-01-14  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreeselection.c (tree_column_is_sensitive),
	(_gtk_tree_selection_row_is_selectable): patched since
	selectable rows are not allowed to be insensitive.

	* gtk/gtktreeview.c (gtk_tree_view_focus_to_cursor): make sure
	we put the cursor on a row which can be selected,
	(gtk_tree_view_move_cursor_up_down),
	(gtk_tree_view_move_cursor_page_up_down): patched to only move
	the cursor to selectable rows.

2007-01-12  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkentry.c: port over "icon-width" style property.

2007-01-12  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreeview.c (gtk_tree_view_class_init),
	(gtk_tree_view_init): enable Maemo's view without expanders by
	disabling show-expanders and setting level indent to 10.

2007-01-12  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreeview.c (gtk_tree_view_init): make headers invisible
	by default.

2007-01-12  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreemodelsort.c (gtk_tree_model_sort_row_changed),
	(gtk_tree_model_sort_ref_node), (gtk_tree_model_sort_real_unref_node),
	(gtk_tree_model_sort_sort_level), (gtk_tree_model_sort_free_level),
	(gtk_tree_model_sort_clear_cache): port over ref counting fixes
	found in maemo-gtk-2-6 and upstream trunk (but not in upstream
	2.10).

2007-01-12  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkentry.c (gtk_entry_button_press): don't add
	entry->scroll_offset to entry->drag_start_y. Fixes the entry
	starting drags after ridiculously small mouse movements.
	(also backfolded fix to upstream)

2007-01-10  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtkcellrenderertext.c (gtk_cell_renderer_text_render): render
	cell in prelight state with GTK_STATE_NORMAL.

2007-01-10  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtkcellrenderertext.c (gtk_cell_renderer_text_init):
	initialize xpad, ypad to zero instead of two.

2007-01-10  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtkcellrenderertoggle.c (gtk_cell_renderer_toggle_class_init),
	(gtk_cell_renderer_toggle_get_property),
	(gtk_cell_renderer_toggle_set_property),
	(gtk_cell_renderer_toggle_render): port over checkbox-mode
	property.

2007-01-10  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtkcellrenderertoggle.c (gtk_cell_renderer_toggle_init):
	port over change which removes assignments to xpad, ypad.

2007-01-10  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtkcellrenderertoggle.c (gtk_cell_renderer_toggle_init):
        refactor to initialize indicator_size to TOGGLE_WIDTH instead
        of a hardcoded value.  (Merge from upstream).

2007-01-10  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtkcellrenderertoggle.c: change value of TOGGLE_WIDTH to
	26.

2007-01-10  Kristian Rietveld  <kris@imendio.com>

	* gkt/gtktreemodelfilter.c (gtk_tree_model_filter_row_deleted):
	silence compiler. (Doesn't happen upstream with gcc 4.x).

2007-01-10  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreemodelfilter.c
	(gtk_tree_model_filter_row_has_child_toggled): port over temporary
	change from g_assert() to g_return_if_fail().

2007-01-10  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtktreemodelfilter.c (gtk_tree_model_filter_init),
	(gtk_tree_model_filter_finalize), (gtk_tree_model_filter_row_deleted),
	(gtk_tree_model_filter_new): port over change which unsets
	the virtual root once that row is being deleted.  (This change is
	in 2.11 upstream, but not in 2.10).

2007-01-10  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkmodules.c (find_module): open modules with
	G_MODULE_BIND_LOCAL.

2007-01-10  Michael Natterer  <mitch@imendio.com>

	Merged from upstream trunk:

	* gtk/gtkrange.[ch]: added properties "fill-level",
	"show-fill-level" and "restrict-to-fill-level" and getters/setters
	for them. The "fill level" is an additional marker on the range's
	trough than can be e.g. used to indicate the amount of
	pre-buffering in a range showing the play position of streamed
	media. See the embedded API docs for details. Made GtkRangeLayout
	a GTypeInstance private struct and removed finalize()
	implementation. Fixes bug #349808

	* gtk/gtk.symbols: added the new symbols.

2007-01-05  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkwindow.c (gtk_window_key_release_event): chain up to
	the right function (also backfolded fix to upstream).

2007-01-05  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkimmodule.c (_gtk_im_module_get_default_context_id): drop
	"const" from return value.

2007-01-03  Kristian Rietveld  <kris@imendio.com>

	* gdk/x11/gdkwindow-x11.c (gdk_window_set_type_hint): revert
	previous fix build patch and move the dropdown and message hint cases
	to default: as per Tim's suggestion.

2007-01-03  Kristian Rietveld  <kris@imendio.com>

	* gdk/x11/gdkwindow-x11.c (utf8_is_latin1),
	(set_text_property), (set_wm_name), (gdk_window_set_title),
	(gdk_window_set_icon_name): disable code setting legacy ICCCM
	properties by wrapping the responsible code in ENABLE_ICCCM_LEGACY
	defines.

2007-01-03  Kristian Rietveld  <kris@imendio.com>

	* gdk/x11/gdkwindow-x11.c (gdk_window_set_type_hint): fix build by
	having the dropdown menu hint set the message hint.

2007-01-03  Kristian Rietveld  <kris@imendio.com>

	* gdk/x11/gdkdisplay-x11.c (gdk_display_open): allow to disable
	XSHM via GDK_DISABLE_XSHM environment variable.

2006-12-22  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtkwidget.[ch]: Ported over the tap and hold implementation
	from maemo-gtk-2-6.

	* gtk/gtktreeview.c
	* gtk/gtkcontainer.c
	* gtk/gtkbutton.c: Port over tap and hold support from maemo-gtk-2-6.

	* gtk/gtkmenu.[ch] (gtk_menu_init), (gtk_menu_popup): Partially
	port over _gtk_menu_enable_context_menu_behaviour() and related
	changes.

	* gtk/gtkiconfactory.c (init_icon_sizes): Initialize hildon icon
	sizes, don't scale icons with hildon icon size.

	* gtk/gtkicontheme.c: Support animations, don't prefer built in
	icons when looking up icons.

	* gtk/gtkstyle.c (gtk_default_render_icon): Ported over maemo-gtk-2-6
	change which refrains from scaling icons with hildon icon size.

	* gtk/updateiconcache.c: Port over support for animations.

2006-12-22  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkenums.h: add HILDON_ICON_SIZE_FOO GtkIconSize values.

2006-12-20  Kristian Rietveld  <kris@imendio.com>

	* gtk/gtkimmulticontext.[ch]
	* gtk/gtkimcontext.c
	* gtk/gtkimmodule.h: Ported over code from maemo-gtk-2-6 to get
	the virtual keyboards running.

2006-12-20  Kristian Rietveld  <kris@imendio.com>

	* gdk/gdkwindow.h: move GDK_WINDOW_TYPE_HINT_MESSAGE to the same
	position in the enum as in maemo-gtk-2-6 to restore binary
	compatibility.

2006-12-15  Kristian Rietveld  <kris@imendio.com>

	* gdk/gdkwindow.h: added GDK_WINDOW_TYPE_HINT_MESSAGE.

	* gdk/x11/gdkwindow-x11.c (set_initial_hints): added Maemo specific
	code for setting _NET_WM_STATE since the TN relies on this,
	(gdk_window_set_type_hint),
	(gdk_window_get_type_hint): support HINT_MESSAGE.

2006-12-15  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkrc.c: added support for logical colors as they were in
	maemo-gtk-2-6, so we now parse both the new upstream format and
	the old one.

2006-12-15  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkwidget.h
	* gtk/gtktreeview.h
	* gtk/gtktoolbutton.h
	* gtk/gtkimcontext.h
	* gtk/gtkentry.h
	* gtk/gtkmenushell.h: added class struct changes (vtable entries).

2006-12-15  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkfilesystem.[ch] (gtk_file_system_render_icon): added this
	missing stub.

2006-12-13  Michael Natterer  <mitch@imendio.com>

	* gtk/gtkwidget.[ch]
	* gtk/gtkrange.[ch]
	* gtk/gtktextview.[ch]
	* gtk/gtkstyle.[ch]
	* gtk/gtktextbuffer.[ch]
	* gtk/gtkwindow.[ch]
	* gtk/gtkimcontext.[ch]
	* gtk/gtkfilesystem.[ch]
	* gtk/gtkbutton.[ch]
	* gtk/gtkentry.[ch]: start migration stage 1: add all stubs of
	functions that were added to maemo-gtk-2-6. Didn't change any
	signals or vtable entries yet.

	* gtk/gtkenums.h: added the enums needed by the stubs.

2006-12-04  Tommi Komulainen  <tommi.komulainen@nokia.com>

	Export enough symbols for implementing GtkFileChooser interface
	outside gtk.

	* gtk/gtk.symbols: add hildon_gtk_file_chooser_install_properties
	* gtk/Makefile.am (INCLUDES): add -DGTK_FILE_CHOOSER_ENABLE_UNSUPPORTED
	(gtk_private_h_sources, gtk_semi_private_h_sources): export
	gtkfilesystemmodel.h, gtkfilechooserprivate.h, and
	gtkfilechooserutils.h as semi-private
	* gtk/gtkfilechooserutils.c
	(hildon_gtk_file_chooser_install_properties): add exported version of 
	_gtk_file_chooser_install_properties
	* gtk/gtkfilesystemmodel.h: add GTK_FILE_SYSTEM_ENABLE_UNSUPPORTED
	#ifdef guard
	* gtk/gtkfilechooserprivate.h: add GTK_FILE_CHOOSER_ENABLE_UNSUPPORTED
	#ifdef guard
	* gtk/gtkfilechooserutils.h: add GTK_FILE_CHOOSER_ENABLE_UNSUPPORTED
	#ifdef guard, declare hildon_gtk_file_chooser_install_properties

	* tests/autotestfilechooser.c: build with
	GTK_FILE_CHOOSER_ENABLE_UNSUPPORTED
